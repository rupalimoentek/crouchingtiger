<script>
    function maxLengthCheck(object) {
    if (object.value.length > object.maxLength) {
    object.value = object.value.slice(0, object.maxLength)
    }
    }
    
    var captainModalInstanceCtrl = function($scope, $uibModalInstance) {
    $scope.ok = function() {
    $uibModalInstance.close();
    };
    
    $scope.cancel = function() {
    $uibModalInstance.dismiss('cancel');
    };
    };
    </script>
    <script type="text/ng-template" id="my-custom-template">
    <div class="tag-template">
    <div>
        <span apply-css class="tag-span" ng-class="$getTagClass()">{{$getDisplayText()}}</span>
        <a class="remove-button" ng-click="$removeTag()">&#215;</a>
    </div>
    </div>
    </script>
    <!-- style -->
    <style>
    panel-controls>a.activate {
    opacity: 1;
    text-decoration: none;
    color: #e5e5e5;
    }
    
    panel-controls>a.activate:hover {
    color: #fff;
    }
    
    .start-date .btn-danger {
    display: none
    }
    
    #locationdiv ul {
    max-height: 150px;
    overflow-y: scroll;
    }
    
    .timeline-gray .timeline-body {
    border-color: #ccc;
    background-color: #efefef !important;
    }
    
    .timeline-gray .timeline-body:after {
    border-right-color: #ccc !important;
    }
    
    .timeline-gray .timeline-time {
    color: #ccc;
    }
    
    .timeline>li .timeline-header,
    .timeline>li .timeline-body h3 {
    color: #575759;
    }
    
    .datespace {
    height: 110px;
    }
    
    .fixZindexIssue {
    pointer-events: all !important
    }
    
    .convirza-radio-button {
    margin-right: 10px !important;
    display: inline !important;
    }
    
    .webhook {
    margin-top: 10px;
    }
    
    .disabled {
    pointer-events: none;
    }
    
    md-radio-button.md-checked .md-off {
    border-color: grey !important;
    }
    
    md-radio-button .md-on {
    background-color: #2f7db2 !important;
    }
    
    md-checkbox.md-checked .md-icon {
    background-color: #2f7db2 !important;
    }
    
    [id*="input"] {
    min-width: 200px;
    }
    
    #fieldPicker .container {
    padding-left: 0px;
    }
    
    @media (max-width: 991px) {
    .timeline>li .timeline-icon {
    z-index: 100;
    float: left;
    margin-left: -20px;
    margin-bottom: 10px;
    }
    }
    
    sm-date-time-picker label {
    display: none;
    }
    
    sm-date-time-picker md-input-container {
    margin: 0 0;
    }
    
    @media (max-width: 1150px) and (min-width: 768px) {
    #end-date-picker md-input-container #picker {
    left: initial !important;
    right: 0px !important;
    }
    }
    
    @media (max-width: 700px) and (min-width: 600px) {
    #end-date-picker md-input-container #picker {
    left: 50px !important;
    right: initial;
    }
    }
    
    @media (max-width: 1150px) and (min-width: 768px) {
    #start-date-picker md-input-container #picker {
    left: 0px !important;
    /*right: 0px !important*/
    }
    }
    
    @media (max-width: 700px) and (min-width: 600px) {
    #start-date-picker md-input-container #picker {
    left: 50px !important;
    right: initial;
    }
    }
    
    @media (max-width: 599px) {
    md-toolbar .date-time-header {
    font-size: 25px;
    }
    }
    
    
    md-toolbar:not(.md-menu-toolbar) {
    background-color: #474747 !important;
    }
    
    </style>
    
    <!-- end style -->
    <!-- Page Header -->
    <div id="page-heading">
    <h1>Campaign Builder</h1>
    <div class="options">
    <div class="btn-toolbar">
        <a href="#/set-campaign" class="btn btn-default hidden-xs" title="Campaign List"><i class="fa fa-chevron-left"></i> <i class="fa fa-list"></i></a>
    </div>
    </div>
    </div>
    <div class="container-fluid">
    <div class="row">
    <div class="col-md-12" ng-controller="OldCampaignFormController">
        <div class="container-fluid">
            <form novalidate name="campForm" id="campForm" ng-submit="saveCampaign()">
                <!-- Campaign Details Container -->
                <div class="panel panel-midnightblue">
                    <div class="panel-heading">
                        <h4>Campaign Details</h4>
                        <panel-controls>
                            
                        </panel-controls>
                    </div>
                    <div class="panel-body collapse in">
                        <div class="form-group row">
                            <!-- Active switch -->
                            <div class="col-lg-2 col-md-2 col-sm-2 mt10">
                                <label class="control-label" style="padding-top:8px;">Active?</label>
                                <div class="">
                                    <toggle-switch ng-model="campActive" ng-change="activeToggle()" ng-disabled="!canModify" on-label="Yes" off-label="No" class="primary switch">
                                        <toggle-switch>
                                </div>
                            </div>
                            <!-- Campagin Name Input -->
                            <div class="col-lg-5 col-md-5 col-sm-10 mt20">
                                <label class="control-label">Campaign Name</label>
                                <div class="">
                                    <input type="text" placeholder="New Campaign" class="form-control" ng-model="name" maxlength="200" required validate-utf-eight validate-blur-forza="Campaign Details, Campaign Name" ng-readonly="!canModify">
                                </div>
                            </div>
                            <!-- Campaign ID Input -->
                            <div class="col-lg-5 col-md-5 col-sm-6 mt20">
                                <label class="control-label">Campaign ID</label>
                                <div class="">
                                    <input type="text" class="form-control" placeholder="not required" ng-model="campExtId" value="" maxlength="65" validate-utf-eight validate-blur-forza="Campaign ID, Campaign Name" ng-readonly="!canModify">
                                </div>
                            </div>
                            <!-- Campaign Owner Input -->
                            <div class="col-lg-6 col-md-6 col-sm-6 mt20">
                                <label class="control-label">Campaign Owner</label>
                                <div class="">
                                    <select ui-select2 ng-model="assSalesRep" style="width:100%" ng-disabled="!canModify" validate-utf-eight>
                                        <optgroup label="{{ou.ouName}}" ng-repeat="ou in ownersPickList" ng-readonly="!canModify">
                                            <option value="{{user.id}}" ng-repeat="user in ou.userList" ng-readonly="!canModify"> {{user.name}}</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <!-- Start Date and Time Inputs -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 mt20">
                                        <label class="control-label">Start Date and Time ({{timezoneString}})</label>
                                        <div class="input-group start-date" id="start-date-picker">
                                            <!--close-on-select="true"  -->
                                            <sm-date-time-picker ng-model="dateTime.startDate.date" initial-date="dateTime.startDate.date" data-min-date="dateTime.startDate.minDate" fname="Start Date" lable="Start" on-focus="true" flex="50" flex-sm="100" flex-xs="100" is-required="{{true}}" format="DD MMMM YYYY hh:mm A" mode="date-time" week-start-day="Sunday" disable-year-selection="false" disable="dateIsNotEditable">
                                            </sm-date-time-picker>
                                        </div>
                                    </div>
                                    <!-- End Date and Time Inputs -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 mt20">
                                        <label class="control-label">End Date and Time ({{timezoneString}})</label>
                                        <div class="input-group" id="end-date-picker">
                                            <!--close-on-select="true"  -->
                                            <sm-date-time-picker ng-readonly="true" ng-model="dateTime.endDate.date" initial-date="dateTime.endDate.date" data-min-date="dateTime.endDate.minDate" fname="End Date" lable="End" on-focus="true" flex="50" flex-sm="100" flex-xs="100" format="DD MMMM YYYY hh:mm A" mode="date-time" week-start-day="Sunday" disable-year-selection="false" disable="endDateIsNotEditable">
                                            </sm-date-time-picker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Referral Section -->
                            <div class="col-md-12" ng-show="showReferral && referralSubscription" id="referral-container">
                                <div class="col-lg-6 col-lg-offset-6">
                                    <p>Referrals</p>
                                    <input icheck type="checkbox" ng-model="referralChecked" ng-change="referralClick();" name="referral-checkbox" value="active" style="cursor:pointer;" ng-disabled="disableReferral" id="referral-checkbox" ng-click="toggleReferralCheckbox();">
                                    <span style="padding-left:6px; position:relative; user-select:none; cursor:pointer;" id="referral-label" ng-click="toggleReferralCheckbox();" ng-disabled="disableReferral">Play referral recording at campaign end and delete tracking numbers after referral period?</span>
                                    <br>
                                    <span style="padding-left:27px;">For the next 30 days, notify users to call this phone number:</span>
                                    <input class="form-control" name="referralNumber" id="referralNumber" validate-blur-forza="Campaign Details, Ring To Phone Number" ng-model="referralNumber" style="width:115px; height:30px; display:inline-block; margin-left:5px;" ng-required="referralChecked" ng-disabled="!referralChecked" data-inputmask="'mask':'(999) 999-9999'" maskinput ng-readonly="disableReferral" checklength="10" validate-masked-phone-number>
                                    </input>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- saving campaign Details -->
                    <div class="panel-footer text-right">
                        <button class="btn btn-primary" ng-disabled="savingCampaign || campForm.referralNumber.$invalid || campForm.referralNumber.chatAt(1) === 0" type="submit" ng-show="canModify" >
                            Save Campaign Details
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <div ng-controller="OldPhoneNumbersEditableController">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <panel panel-class="panel-midnightblue" data-heading="Tracking Numbers" ng-show="!isNewCamp">
                            <div style="" class="text-right mb20">
                                <button class="btn btn-info" ng-click="loadCallFlow()" ng-show="canModify&& !isNewCamp" onClick="ga('send', 'event', { eventCategory: 'Button', eventAction: 'Click', eventLabel: 'Add Tracking Number'});">Add Tracking Number</button>
                                <button class="btn btn-info" ng-click="loadMultiPass()" ng-show="canModify && !isNewCamp" onClick="ga('send', 'event', { eventCategory: 'Button', eventAction: 'Click', eventLabel: 'Add Multiple Tracking Numbers'});">Add Multiple Tracking Numbers</button>
                            </div>
                            <!-- Phone Numbers Section -->
                            <div sticky-table-header3 style="overflow-x: auto">
                                <table class="table table-condensed  table-striped" style="min-width: 840px">
                                    <thead>
                                        <tr style="font-weight: bold; margin-top: 40px;">
                                            <th ng-repeat="th in campaignBuilderHeader">{{th}}</th>
                                            <th class="text-right" ng-repeat="action in actionHeader">{{action}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="pnumber in phoneNumbers">
                                            <td>
                                                <!-- Phone Number -->
                                                <span e-name="phone" e-form="rowform" e-required>
                                            {{ pnumber.phonep || '' }}
                                            </span>
                                            </td>
                                            <td>
                                                <!-- Name -->
                                                <span e-name="name" e-form="rowform" e-required>
                                            {{ pnumber.name || '' }}
                                            </span>
                                            </td>
                                            <td>
                                                <!-- Ad Source -->
                                                <span e-name="status" e-form="rowform">
                                            {{ pnumber.channels || '' }}
                                            </span>
                                            </td>
                                            <td>
                                                <!-- Call Value -->
                                                <span e-name="value" e-form="rowform">
                                            {{ pnumber.value  }}
                                            </span>
                                            </td>
                                            <td>
                                                <!-- Repeat Interval (hours) -->
                                                <span e-name="rinterval" e-form="rowform">
                                            {{ pnumber.rinterval || '' }}
                                            </span>
                                            </td>
                                            <td>
                                                <!-- Status -->
                                                <span e-name="status" e-form="rowform" e-ng-options="g.id as g.text for g in groups">
                                                <span ng-if="pnumber.status2 === 'Referral'">Referral until {{ pnumber.end_date }}</span>
                                                <span ng-if="pnumber.status2 !== 'Referral'">{{ pnumber.status2 || '' }}</span>
                                                </span>
                                            </td>
                                            <td style="white-space: nowrap">
                                                <!-- Actions -->
                                                <form editable-form name="rowform" onbeforesave="saveUser($data, pnumber.id)" ng-show="0" class="form-buttons form-inline" shown="inserted == number">
                                                    <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-sm btn-primary">Save</button>
                                                    <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-sm btn-default">Cancel</button>
                                                </form>
                                                <div class="buttons text-right">
                                                    <button class="btn" ng-class="{ 'btn-sm btn-primary' : pnumber.status2 !== 'Referral', 'btn-default disabled fixZindexIssue' : pnumber.status2 === 'Referral' }" ng-disabled="pnumber.status2 === 'Referral'" ng-click="loadCallFlow(pnumber)">
                                                       Edit
                                                    </button>
                                                    <button class="btn" ng-class="{ 'btn-sm btn-midnightblue' : pnumber.status2 !== 'Referral', 'btn-default disabled fixZindexIssue' : pnumber.status2 === 'Referral' }" ng-click="loadCallActions(pnumber)" ng-disabled="userAccess.callaction === undefined || userAccess.callaction < 4 || pnumber.status2 === 'Referral'">
                                                        Call Actions
                                                    </button>
                                                    <button class="btn" ng-class="{ 'btn-sm btn-danger' : pnumber.status2 !== 'Referral', 'btn-default disabled fixZindexIssue' : pnumber.status2 === 'Referral' }" ng-disabled="pnumber.status2 === 'Referral'" ng-click="removeNumber(pnumber)" ng-show="canModify">
                                                        Delete
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </panel>
                    </div>
                </div>
            </div>
            <div class="container-fluid" id="multiPass">
                <div class="row">
                    <div class="col-md-12" style="z-index: 103;">
                        <panel panel-class="panel-midnightblue" ng-show="showMultiPass" data-heading="Add Multiple Tracking Numbers">
                            <panel-controls>
                               
                            </panel-controls>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-3 col-md-3 col-sm-7 mt20">
                                        <div class="input-icon right" id="locationdiv">
                                            <i ng-show="loadingLocations" class="fa fa-refresh fa-spin"></i>
                                            <input type="text" ng-model="selectedCallFlow.address" placeholder="Type in an Area Code or City" uib-typeahead="address for address in getLocation($viewValue)" typeahead-loading="loadingLocations" class="form-control" typeahead-on-select="onFocus($item)" typeahead-wait-ms="300">
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-md-3 col-sm-3 mt20">
                                        <label class="control-label">Qty: </label>
                                        <input type="number" style="display:inline;width:75px;" maxlength="3" class="form-control" ng-model="selectedCallFlow.count" validate-blur-forza="Add Multiple Tracking Numbers, Quantity" ng-pattern="/^[0-9]+$/" ng-required="showMultiPass" min="0" max="100" ng-max="100">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-2 mt20">
                                        <button class="btn btn-default" ng-disabled="!selectedCallFlow.count || numList.length <1" ng-click="addMultCalls(); multipleCallsStickyHeader();">Add <i class="fa fa-plus-circle"></i></button>
                                    </div>
                                    
                                    <div class="col-xs-12 mt20">
                                        <form editable-form name="tableform" id="table" valid-submit="" onaftersave="proceedToSaveTable(tableform)" ; novalidate>
                                            <div sticky-table-header3 class="table-responsive">
                                                <table class="table">
                                                    <thead>
                                                        <tr style="margin-top: 40px; margin-left: 0px;">
                                                            <th ng-repeat="th in multipleNumbersHeader">{{th}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="callflowitem in MultCallFlowList" ng-init="rowIndex=$index">
                                                            <td class="pretty-number-width">
                                                                {{callflowitem.pretty_number}}
                                                            </td>
                                                            <td class="callflowitem-name-width">
                                                                <!-- editable name (text with validation) onbeforesave="validateData($data, 'Name')"-->
                                                                <span editable-text="callflowitem.name" e-form="tableform" e-maxlength="50" e-required e-validate-utf-eight e-validate-blur-forza="Call Flows, Name" onbeforesave="validateData($data)" e-disable-comma>
                                                             {{ callflowitem.name || 'required' }}
                                                     </span></td>
                                                            <td class="callflowitem-channel-width">
                                                                <span ng-init="callflowitem.channel = options[0]" editable-select="callflowitem.channel" e-form="tableform" e-ng-options="c.channel_id as c.sub_category group by c.category for c in channels" e-required e-validate-blur-forza="Call Flows, Ad Source" onbeforesave="validateData($data)" e-value="callflowitem.channel.channel_id">
                                                         {{ showChannel(callflowitem.channel) || '-Select-' }}
                                                      </span>
                                                            </td>
                                                            <td class="customsource-width">
                                                                <span ng-show="!IsVisible" style="color: red">--Select--</span>
                                                                <span ng-show="IsVisible">
                                                            <select ui-select2="callflowitem.selectCustomOptions(rowIndex+1,1,'multiple')" ng-model="callflowitem.customSourceList_1" single style="width:100%;" ng-disabled="!canModify" placeholder="Optional">
                                                                <option value=""></option>
                                                                <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS1 | orderBy:'name'"> {{customSource.name}}</option>
                                                            </select>
                                                        </span>
                                                            </td>
                                                            <td class="customsource-width">
                                                                <span ng-show="!IsVisible" style="color: red">--Select--</span>
                                                                <span ng-show="IsVisible">
                                                            <select ui-select2="callflowitem.selectCustomOptions(rowIndex+1,2,'multiple')" ng-model="callflowitem.customSourceList_2" single style="width:100%;" ng-disabled="!canModify" placeholder="Optional">
                                                                <option value=""></option>
                                                                <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS2 | orderBy:'name'"> {{customSource.name}}</option>
                                                            </select>
                                                        </span>
                                                            </td>
                                                            <td class="customsource-width">
                                                                <span ng-show="!IsVisible" style="color: red">--Select--</span>
                                                                <span ng-show="IsVisible">
                                                            <select ui-select2="callflowitem.selectCustomOptions(rowIndex+1,3,'multiple')" ng-model="callflowitem.customSourceList_3" single style="width:100%;" ng-disabled="!canModify" placeholder="Optional">
                                                                <option value=""></option>
                                                                <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS3 | orderBy:'name'"> {{customSource.name}}</option>
                                                            </select>
                                                        </span>
                                                            </td>
                                                            <td class="customsource-width">
                                                                <span ng-show="!IsVisible" style="color: red">--Select--</span>
                                                                <span ng-show="IsVisible">
                                                            <select ui-select2="callflowitem.selectCustomOptions(rowIndex+1,4,'multiple')" ng-model="callflowitem.customSourceList_4" single style="width:100%;" ng-disabled="!canModify" placeholder="Optional">
                                                                <option value=""></option>
                                                                <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS4 | orderBy:'name'"> {{customSource.name}}</option>
                                                            </select>
                                                        </span>
                                                            </td>
                                                            <td class="customsource-width">
                                                                <span ng-show="!IsVisible" style="color: red">--Select--</span>
                                                                <span ng-show="IsVisible">
                                                            <select ui-select2="callflowitem.selectCustomOptions(rowIndex+1,5,'multiple')" ng-model="callflowitem.customSourceList_5" single style="width:100%;" ng-disabled="!canModify" placeholder="Optional">
                                                                <option value=""></option>
                                                                <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS5 | orderBy:'name'"> {{customSource.name}}</option>
                                                            </select>
                                                        </span>
                                                            </td>
                                                            <td class="callflowitem-value-width">
                                                                <!-- editable value (text with validation) -->
                                                                <span editable-number="callflowitem.value" e-form="tableform" e-min="0" e-max="999999" e-validate-blur-forza="Call Flows, Call Value">
                                                             {{ callflowitem.value || '' }}
                                                            </span>
                                                            </td>
                                                            <td class="callflowitem-repeatint-width">
                                                                <!-- editable repeat intervel (text with validation) -->
                                                                <span editable-number="callflowitem.repeatint" e-form="tableform" e-min="1" onbeforesave="validateData($data)" e-max="8760" e-required e-validate-blur-forza="Call Flows, Repeat Interval">
                                                             {{ callflowitem.repeatint || '72' }}
                                                            </span>
                                                            </td>
                                                            <td class="callflowitem-ringto-width">
                                                                <!-- editable ringto number (text with validation) -->
                                                                <span editable-text="callflowitem.ringto" e-form="tableform" e-required e-maskinput e-ng-pattern="/^[0-9-() ]+$/" e-data-inputmask="'mask':'(999) 999-9999'" e-checklength="10" e-validate-blur-forza="Call Flows, Ring to" onbeforesave="validateData($data)">
                                                             {{ callflowitem.ringto || 'required' }}
                                                            </span>
                                                            </td>
                                                            <td class="callflowitem-recordcall-width">
                                                                <!-- editable recordcall number (text with validation) -->
                                                                <span editable-select="callflowitem.recordcall" e-form="rowform" e-ng-options="g.text as g.text for g in recordoptions">
                                                             {{ showRecordOptions(callflowitem) || 'yes' }}
                                                            </span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="btn-edit">
                                                <a type="button" class="btn btn-default" style="float:right;" ng-click="tableform.$show(); ShowHide()" ng-show="!tableform.$visible && isEditable" ng-disabled="!selectedCallFlow.count || numList.length <1">Edit</a>
                                            </div>
                                            <div class="btn-form" ng-show="tableform.$visible">
                                                <button type="submit" style="float:right;" ng-disabled="tableform.$waiting" class="btn btn-primary">Save &amp; Close</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="row col-xs-12">
                            </div>
                        </panel>
                    </div>
                </div>
            </div>
    
            <div class="container-fluid" id="callFlow">
                <form name="singlecallForm" id="singlecallForm" novalidate valid-submit="proceedToCallFlowUpdate()">
                    <div class="row">
                        <div class="col-md-12" style="z-index: 999; margin-bottom: -20px;">
                            <div class="panel panel-midnightblue" ng-show="showCallFlow">
                                <div class="panel-heading">
                                    <h4 ng-if="isNew">Add Tracking Number</h4>
                                    <h4 ng-if="!isNew">Edit Tracking Number</h4>
                                    <panel-controls>
                                    </panel-controls>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <div class="row">
                                         <div class="col-lg-2 col-md-2 col-sm-2 mt10">
                                             <label class="control-label" style="padding-top:8px;">Active?</label>
                                             <div class="">
                                                 <toggle-switch ng-model="cfactive"   on-label="Yes" off-label="No" class="primary switch" is-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)">
                                                     <toggle-switch>
                                             </div>
                                         </div>
    
                                         <div class="col-lg-2 col-md-2 col-sm-2 mt10" ng-show="showSpambutton">
                                             <label class="control-label" style="padding-top:8px;">Spam Guard?</label>
                                             <div class="">
                                                 <toggle-switch ng-model="selectedCallFlow.spamActive" is-disabled="!canModify || ((selectedCallFlow.quantity >1 && isNew)) "  on-label="YES" off-label="NO" class="primary switch">
                                                     <toggle-switch>
                                             </div>
                                         </div>
    
                                         <div class="col-lg-6 col-md-6 col-sm-12 mt20" ng-Show="isNew">
                                             <div class="radio mt0" ng-init="selectedCallFlow.callflowOption = 'singleNumber'" ng-Show="isNew">
                                                 <md-radio-group ng-model="selectedCallFlow.callflowOption">
                                                     <md-radio-button class="convirza-radio-button" ng-readonly="!canModify" ng-model="selectedCallFlow.callflowOption" name="callflowOption" ng-change="showSubmit()" id="optionsRadios1" value="singleNumber" >
                                                         Single Number
                                                     </md-radio-button>
                                                     <md-radio-button class="convirza-radio-button" ng-readonly="!canModify" ng-model="selectedCallFlow.callflowOption" name="callflowOption" ng-change="showSubmit()" id="optionsRadios2" value="numberPool" >
                                                         Number Pool
                                                     </md-radio-button>
                                                     <md-radio-button class="convirza-radio-button" ng-readonly="!canModify" ng-model="selectedCallFlow.callflowOption" name="callflowOption" ng-change="showSubmit()" id="optionsRadios3" value="reservedNumber" >
                                                         Reserved Number
                                                     </md-radio-button>
                                                 </md-radio-group>
                                             </div>
    
                                             <div class="input-icon right" id="locationdiv" ng-show="selectedCallFlow.callflowOption != 'reservedNumber'">
                                                 <i ng-show="loadingLocations" class="fa fa-refresh fa-spin"></i>
                                                 <input type="text" ng-model="selectedCallFlow.address" placeholder="Type in an Area Code or City" uib-typeahead="address for address in getLocation($viewValue)" typeahead-loading="loadingLocations" class="form-control" ng-focus="onFocus(selectedCallFlow.address)" ng-blur="lostFocus(selectedCallFlow.address)" ng-change="selectedCallFlow.num='';onFocus(selectedCallFlow.address)" ng-Show="isNew" typeahead-wait-ms="300" ng-disabled="!canModify ||selectedCallFlow.quantity >1">
                                             </div>
    
                                             <div class="input-icon right" ng-show="selectedCallFlow.callflowOption == 'reservedNumber' ">
                                                 <div ng-Show="isNew" class="">
                                                     <select ng-init="selectedCallFlow.num = ''" class="form-control" ng-model="selectedCallFlow.num" validate-blur-forza="Tracking Number Details, Reserved Number" ng-options="num.pretty_number for num in resNumList track by num.number" ng-focus="onReservedNumberFocus()" id="source" ng-required="selectedCallFlow.callflowOption == 'reservedNumber' && isNew" ng-change="setNewNumber(selectedCallFlow.num,selectedCallFlow.address)">
                                                         <option ng-selected="true" disabled value=""> -- Select -- </option>
                                                         <option value="more">More...</option>
                                                     </select>
                                                 </div>
                                             </div>
                                         </div>
    
                                         <div class="col-lg-2 col-md-4 col-sm-6 mt20" ng-hide="selectedCallFlow.callflowOption == 'reservedNumber'">
                                                <div ng-if='LoadTrackingNumber'>
                                                        <div class="oldTrackingLoader">
                                                                <img src="./img/pageloading.gif" class="TrackingLoader-img" alt="trackingnumbers"/> 
                                                    </div>
                                                 </div>
                                            <div ng-show="selectedCallFlow.callflowOption == 'singleNumber'">
                                                 <label class=" control-label">Tracking Number</label>
                                                 <div ng-Show="isNew" class="">
                                                     <select ng-init="selectedCallFlow.num = ''" class="form-control" ng-model="selectedCallFlow.num" validate-blur-forza="Tracking Number Details, Tracking Number" ng-options="num as num.pretty_number for num in numList track by num.number" id="source" ng-required="selectedCallFlow.callflowOption == 'singleNumber' && isNew" ng-change="setNewNumber(selectedCallFlow.num,selectedCallFlow.address);showSubmit();" ng-disabled="!canModify || LoadTrackingNumber ||loadingLocations">
                                                         <option ng-selected="true" disabled value=""> -- Select -- </option>
                                                         <!-- <option value="more">More...</option> -->
                                                     </select>
                                                </div>
                                                 <label ng-Hide="isNew">{{selectedCallFlow.phonep}}</label>
                                             </div>
    
                                             <div ng-show="selectedCallFlow.callflowOption == 'numberPool' ">
                                                 <label class=" control-label">Quantity</label>
                                                 <div class="">
                                                     <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Quantity"  ng-pattern="/^[0-9]+$/" ng-model="selectedCallFlow.numberPool" min="1" ng-required="selectedCallFlow.callflowOption == 'numberPool'" ng-blur="disableNumberPool()"
                                                     ng-disabled="!isNew">
                                                 </div>
                                             </div>
                                         </div>
                                        </div>
                        
                                        
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-12 mt20" ng-class="selectedCallFlow.callflowOption == 'reservedNumber'">
                                                <label class=" control-label">Tracking Number Name</label>
                                                <div class="">
                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Name" ng-model="selectedCallFlow.name" maxlength="50" required ng-readonly="!canModify" disable-comma ng-disabled="!canModify" ng-change="showSubmit()">
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-4 mt20">
                                                <label class="control-label">Call Value</label>
                                                <div class="">
                                                    <input placeholder="optional" type="number" validate-blur-forza="Tracking Number Details, Call Value" ng-model="selectedCallFlow.value" class="form-control ng-valid-number" ng-maxlength="6" ng-pattern="/^[0-9]+$/" maxlength="6" min="0" max="999999" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)">
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-4 mt20">
                                                <label class=" control-label">Repeat Interval (hours)</label>
                                                <div class="">
                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Repeat Interval" ng-model="selectedCallFlow.rinterval" ng-pattern="/^[0-9]+$/" required ng-max="8760" max="8760" min="0" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)">
                                                </div>
                                            </div>
                                            <div class=" col-lg-3 col-md-3 col-sm-4 mt20">
                                                <label class=" control-label">Ad Source</label>
                                                <div class="">
                                                    <select ng-init="selectedCallFlow.channel = options[0]" class="form-control" id="source" validate-blur-forza="Tracking Number Details, Ad Source" ng-model="selectedCallFlow.channel" onChange="ga('send', 'event', 'Form Event', 'Campaign Ad Source', this.options[this.selectedIndex].value);" ng-options="c.sub_category group by c.category for c in channels" required ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)">
                                                        <option ng-selected="true" disabled value=""> -- Select -- </option>
                                                    </select> 
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="row">
                                            <div class="col-lg-2 col-md-4 col-sm-6 mt20">
                                                <label class="control-label">Custom Source 1</label>
                                                <div class="">
                                                    <select id="select" ui-select2="selectCustomOptions(1,1,'single')" ng-model="selectedCallFlow.customSourceList_1" single style="width:100%;" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" placeholder="Optional">
                                                        <option value=""></option>
                                                        <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS1 | orderBy:'name'"> {{customSource.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-4 col-sm-6 mt20">
                                                <label class="control-label">Custom Source 2</label>
                                                <div class="">
                                                    <select id="select" ui-select2="selectCustomOptions(1,2,'single')" ng-model="selectedCallFlow.customSourceList_2    " single style="width:100%;" ng-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)" placeholder="Optional">
                                                        <option value=""></option>
                                                        <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS2 | orderBy:'name'"> {{customSource.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-4 col-sm-6 mt20">
                                                <label class="control-label">Custom Source 3</label>
                                                <div class="">
                                                    <select id="select" ui-select2="selectCustomOptions(1,3,'single')" ng-model="selectedCallFlow.customSourceList_3    " single style="width:100%;" ng-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)" placeholder="Optional">
                                                        <option value=""></option>
                                                        <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS3 | orderBy:'name'"> {{customSource.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-4 col-sm-6 mt20">
                                                <label class="control-label">Custom Source 4</label>
                                                <div class="">
                                                    <select id="select" ui-select2="selectCustomOptions(1,4,'single')" ng-model="selectedCallFlow.customSourceList_4    " single style="width:100%;" ng-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)" placeholder="Optional">
                                                        <option value=""></option>
                                                        <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS4 | orderBy:'name'"> {{customSource.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-4 col-sm-6 mt20">
                                                <label class="control-label">Custom Source 5</label>
                                                <div class="">
                                                    <select id="select" ui-select2="selectCustomOptions(1,5,'single')" ng-model="selectedCallFlow.customSourceList_5    " single style="width:100%;" ng-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)" placeholder="Optional">
                                                        <option value=""></option>
                                                        <option value="{{customSource.id}}" ng-repeat="customSource in customsourcesArray.CS5 | orderBy:'name'"> {{customSource.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="row mt20">
                                            <div class="col-sm-2">
                                                <div class="checkbox" ng-show="userAccess.dni !== undefined && userAccess.dni > 4">
                                                    <md-checkbox ng-model="selectedCallFlow.showDNI" value="" ng-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)">
                                                        Dynamic Number
                                                    </md-checkbox>
                                                </div>
                                            </div>
                                            <div ng-show="selectedCallFlow.showDNI && !(selectedCallFlow.quantity >1 && isNew)">
                                                <div class="col-sm-2">
                                                    <label class=" control-label">Host Domain</label>
                                                    <div class="">
                                                        <input type="text" class="form-control"  ng-readonly="!canModify" name="destination_url" ng-model="selectedCallFlow.destination_url" ng-pattern="/^[a-z0-9\*]+([\-\.]{1}[a-z0-9\*]+)*\.[a-z\*]{1,5}(:[0-9]{1,5})?(\/.*)?$/i" ng-disable="!canModify || (selectedCallFlow.quantity > 1 && isNew)"  ng-required="selectedCallFlow.showDNI" maxlength="35" validate-blur-forza="Tracking Number Details, Host Domain" >
                                                    </div>
                                                </div>
                                                <div class="col-sm-2">
                                                    <label class=" control-label">Referring Website</label>
                                                    <div class="" ng-show="!showReferrerTextBox">
                                                        <select ng-init="selectedCallFlow.referrer = options[0]" data-placeholder="Select" class="form-control" id="source" ng-change="changeReferrer()" ng-model="selectedCallFlow.referrer" ng-options="g.value as g.text for g in dniReferrer" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" validate-blur-forza="Tracking Number Details, Referer">
                                                            <option value="" ng-selected="true" disabled>-- Select --</option>
                                                            <option value="{{g.value}}" ng-repeat="g in dniReferrer" ng-selected="selectedCallFlow.referrer == g.value" ng-slected=""> {{g.text}}</option>
                                                        </select>
                                                        <!-- ng-options="g.id as g.text for g in dni_type" -->
                                                    </div>
                                                    <div class="" ng-show="showReferrerTextBox">
                                                        <input type="text" class="form-control" ng-model="selectedCallFlow.referrer" value="" ng-readonly="!canModify || (selectedCallFlow.quantity > 1 && isNew)" maxlength="35" validate-utf-eight placeholder="add New" ng-blur="changeReferrer()" validate-blur-forza="Tracking Number Details, Referer">
                                                    </div>
                                                </div>
                                                <div class="col-sm-2">
                                                    <label class=" control-label">DNI Type</label>
                                                    <div class="">
                                                        <select class="form-control" validate-blur-forza="Tracking Number Details, DNI Type" ng-required="selectedCallFlow.showDNI" ng-model="selectedCallFlow.dniType" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)">
                                                             <option value="" ng-selected="true">-- Select --</option>
                                                            <option value="{{dni.id}}" ng-repeat="dni in dni_type" ng-hide = "hideDniOptions(dni.id, selectedCallFlow.callflowOption)" ng-selected="selectedCallFlow.dniType == dni.id && !hideDniOptions(dni.id, selectedCallFlow.callflowOption)" ng-slected=""> {{dni.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2">
                                                    <label class=" control-label">HTML Class</label>
                                                    <div class="">
                                                        <input type="text" class="form-control" name="dni_element" ng-model="selectedCallFlow.dni_element" value="" ng-readonly="!canModify || (selectedCallFlow.quantity > 1 && isNew)" ng-required="selectedCallFlow.showDNI" maxlength="35" validate-utf-eight validate-blur-forza="Tracking Number Details, HTML Class">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1" ng-show="selectedCallFlow.dniType == 'session' && hideDniOptions(dni.id, selectedCallFlow.callflowOption)">
                                                    <label class=" control-label">TTL</label>
                                                    <div class="">
                                                        <input type="number" class="form-control" ng-readonly="!canModify || (selectedCallFlow.quantity > 1 && isNew)" name="dni_ttl" ng-model="selectedCallFlow.dni_ttl" value="" ng-readonly="!canModify" ng-required="selectedCallFlow.showDNI && selectedCallFlow.dniType == 'session'" maxlength="35" validate-utf-eight validate-blur-forza="Tracking Number Details, TTL" min="1" ng-pattern="/^[0-9]+$/">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1" style="margin-top:25px;">
                                                    <div class="">
                                                        <a ng-click="dniParams('lg')" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)">Custom Parameters</a>
                                                        <!-- <a ng-click="open('lg')">Custom Parameters</a> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="row mt20">
                                            <div class="col-sm-2">
                                                <div class="checkbox">
                                                    <md-checkbox ng-model="selectedCallFlow.showWebhook" value="" ng-disabled="userAccess.callaction === undefined || userAccess.callaction < 4 || pnumber.status2 === 'Referral' || !canModify || (selectedCallFlow.quantity >1 && isNew)">
                                                        Pre-call Webhook
                                                    </md-checkbox>
                                                </div>
                                            </div>
                                            <div ng-show="selectedCallFlow.showWebhook">
                                                <div class="col-sm-2">
                                                    <label class="webhook control-label ">When call connects, trigger</label>
                                                </div>
                                                <div class="">
                                                    <div class="col-sm-2" ng-show="!showWebHookTextBox">
                                                        <select ng-init="selectedCallFlow.webhook = options[0]" data-placeholder="Select" class="form-control" id="source" ng-change="changeWebHook()" ng-required="selectedCallFlow.showWebhook" ng-model="selectedCallFlow.webhook" ng-options="g.webhook_id as g.webhook_name for g in webhook" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" validate-blur-forza="Tracking Number Details, Pre-call webhook">
                                                            <option value="" ng-selected="true" disabled>-- Select --</option>
                                                            <option value="{{g.webhook_id}}" ng-repeat="g in webhook" ng-selected="selectedCallFlow.webhook == g.webhook_id" ng-slected=""> {{g.webhook_name}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <a href="/#/set-webhook" target="_blank"><i class="fa fa-link webhook" title="Jump to webhooks"></i></a>
                                            </div>
                                        </div>
    
                                        <div class="row mt20">
                                            <div class="col-sm-2">
                                                <label>
                                                    At the start of the call:
                                                </label>
                                            </div>
    
                                            <div class="col-sm-4">
                                                <div class="col-sm-12">
                                                    <!--select ng-model="callflow" class="form-control" id="source" data-placeholder="Select" onChange="ga('send', 'event', 'Form Event', 'Tracking Number Type', this.options[this.selectedIndex].value);" ng-options="callflow.name for callflow in callflowitems track by callflow.name"-->
                                                    <select ng-init="selectedCallFlow.routetype = selectedCallFlow.routetype" ng-model="selectedCallFlow.routetype" class="form-control" id="source" data-placeholder="Select" onChange="ga('send', 'event', 'Form Event', 'Tracking Number Type', this.options[this.selectedIndex].value);" ng-change="showSubmit()" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" required validate-blur-forza="Tracking Number Details, Route Type">
                                                        <option ng-selected="true" disabled value="">-- Select -- </option>
                                                        <option value="simple">Forwarding to a phone number</option>
                                                        <option value="geo">GeoRoute to a location</option>
                                                        <option value="PercentageBasedRoute">Route call based on percentage</option>
                                                        <!--<option value="Voicemail">Forward to voicemail</option>-->
                                                        <option value="ivr">Ask a question</option>
                                                        <option value="hangup">Hang up</option>
                                                    </select>
                                                </div>
                                            </div>
    
                                            <!-- Simple Tracking Number -->
                                            <div class="col-sm-12" ng-show="selectedCallFlow.routetype=='simple'">
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <md-checkbox ng-model="selectedCallFlow.recordCall" ng-disabled="!canModify || (selectedCallFlow.quantity >1 && isNew)">
                                                                Record Call
                                                            </md-checkbox>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.recordCall">
                                                        <div class="col-sm-6">
                                                            <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                            <div class="col-sm-6">
                                                                <select ng-model="selectedCallFlow.playDisclaimer" class="form-control" id="source" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" ng-required="selectedCallFlow.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type simple', this.options[this.selectedIndex].value);">
                                                                    <option value="" ng-disable="true">--Select--</option>
                                                                    <option value="before">Before voice prompt</option>
                                                                    <option value="after">After voice prompt</option>
                                                                    <option value="never">Never</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <md-checkbox ng-model="selectedCallFlow.voicePrompt1" ng-change="voiceTextChange()" ng-disabled="!canModify ||(selectedCallFlow.quantity >1 && isNew)">
                                                                Play a voice prompt
                                                            </md-checkbox>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.voicePrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSSelected">
                                                                <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="selectedCallFlow.voicePromptTTSText" ng-readonly="!canModify || !TTSSelected" ng-change="voiceTextChange()" ng-required="selectedCallFlow.voicePrompt1 && TTSSelected" ng-maxlength="512" maxlength="512">
                                                            </div>
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" style="word-wrap: break-word;" ng-show="!TTSSelected" align="left">Selected Audio Filename: {{selectedCallFlow.voicePromptText}}</div>
                                                            <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                                <a class="btn btn-default" style="" ng-show="TTSSelected  || hasValidVoiceURL" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew) || audioIsPlaying('prompt') || audioIsDownloading() || (!hasValidVoiceURL && !selectedCallFlow.voicePromptTTSText)" ng-click="playVoiceAudio(selectedCallFlow.voiceURL)">{{ (promptAudio === undefined || promptAudio.paused || promptAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(promptAudio === undefined || promptAudio.paused || promptAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                <a class="btn btn-default" style="margin-left:15px;" ng-click="showVoiceModal('lg')" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" ng-show="TTSSelected ">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                <!-- button to remove audio recording -->
                                                                <a class="btn btn-default" style="margin-left:15px;" ng-show="!TTSSelected " ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" ng-click="removeSelectedVoiceAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <md-checkbox ng-model="selectedCallFlow.whisperPrompt1" value="" ng-disabled="!canModify|| (selectedCallFlow.quantity >1 && isNew)">
                                                                Play whisper message before connecting
                                                            </md-checkbox>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.whisperPrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-show="TTSWhisperSelected">
                                                                <input type="text" class="form-control" placeholder="Example: You are receiving a call from Mailer 1a" value="" validate-blur-forza="Tracking Number Details, Whisper message" ng-model="selectedCallFlow.whisperTTSText" ng-readonly="!canModify || !TTSWhisperSelected" ng-required="selectedCallFlow.whisperPrompt1 && TTSWhisperSelected" ng-change="whisperTextChange()">
                                                            </div>
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" style="word-wrap: break-word;" ng-hide="TTSWhisperSelected" align="left">Selected Audio Filename:{{selectedCallFlow.whisperText}}</div>
                                                            <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                                <a class="btn btn-default " style="" ng-show="TTSWhisperSelected || hasValidWhisperURL" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)|| audioIsPlaying('whisper') || audioIsDownloading() || (!hasValidWhisperURL && !selectedCallFlow.whisperTTSText.length) " ng-click="playWhisperAudio(selectedCallFlow.whisperURL)">{{ (whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended) ? 'Play' : 'Pause' }}<i class="{{(whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-click="showWhisperModal('lg')" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" ng-show="TTSWhisperSelected">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                <!-- button to remove audio recording -->
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-show="!TTSWhisperSelected" ng-disabled="!canModify || (selectedCallFlow.quantity > 1 && isNew)" ng-click="removeSelectedWhisperAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-2">
                                                        <label>
                                                            Ring to Phone Number:
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <input type="text" name="aaaaaa1" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="selectedCallFlow.ringtoNum" ng-required="selectedCallFlow.routetype=='simple'" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify || (selectedCallFlow.quantity >1 && isNew)">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End Simple Tracking Number -->
    
                                            <!-- Begin georoute Tracking Number -->
                                            <div class="col-sm-12" ng-show="selectedCallFlow.routetype=='geo'">
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.recordCall" icheck type="checkbox" value="" ng-disabled="!canModify || selectedCallFlow.quantity >1"> Record Call
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.recordCall">
                                                        <div class="col-sm-6">
                                                            <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                            <div class="col-sm-6">
                                                                <select class="form-control" id="source" ng-model="selectedCallFlow.playDisclaimer" ng-disabled="!canModify || selectedCallFlow.quantity >1" ng-required="selectedCallFlow.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type geo', this.options[this.selectedIndex].value);">
                                                                    <option value="" ng-disable="true">--Select--</option>
                                                                    <option value="before">Before voice prompt</option>
                                                                    <option value="after">After voice prompt</option>
                                                                    <option value="never">Never</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.whisperPrompt1" icheck type="checkbox" value="" ng-disabled="!canModify || selectedCallFlow.quantity >1"> Play whisper message before connecting
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.whisperPrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-8" ng-show="TTSWhisperSelected">
                                                                <input type="text" class="form-control" placeholder="Example: You are receiving a call from Mailer 1a" value="" validate-blur-forza="Tracking Number Details, Whisper message" ng-model="selectedCallFlow.whisperTTSText" ng-readonly="!canModify || !TTSWhisperSelected || selectedCallFlow.quantity >1" ng-required="selectedCallFlow.whisperPrompt1 && TTSWhisperSelected" ng-change="whisperTextChange()">
                                                            </div>
                                                            <div class="col-sm-8" ng-hide="TTSWhisperSelected" style="word-wrap: break-word;" align="left">Selected Audio Filename:{{selectedCallFlow.whisperText}}</div>
                                                            <div class="col-sm-4">
                                                                <a class="btn btn-default " style="" ng-show="TTSWhisperSelected || hasValidWhisperURL" ng-disabled="!canModify || selectedCallFlow.quantity >1|| audioIsPlaying('whisper') || audioIsDownloading() || (!hasValidWhisperURL && !selectedCallFlow.whisperTTSText.length) " ng-click="playWhisperAudio(selectedCallFlow.whisperURL)">{{ (whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-click="showWhisperModal('lg')" ng-disabled="!canModify || selectedCallFlow.quantity >1" ng-show="TTSWhisperSelected">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                <!-- button to remove audio recording -->
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-show="!TTSWhisperSelected" ng-disabled="!canModify|| selectedCallFlow.quantity >1" ng-click="removeSelectedWhisperAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-1">
                                                        <label>
                                                            Route by:
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <select ng-model="selectedCallFlow.routeBy" validate-blur-forza="Tracking Number Details, Route By" style="" class="form-control" id="source" ng-required="selectedCallFlow.routetype=='geo'" ng-disabled="!canModify || selectedCallFlow.quantity >1" onChange="ga('send', 'event', 'Form Event', 'Geo Route Type', this.options[this.selectedIndex].value);">
                                                            <option selected disabled value=""> -- Select a List-- </option>
                                                            <option value="Npa">Area Code Proximity</option>
                                                            <option value="Claimed">Zip/Postal Code Claimed</option>
                                                            <option value="Zipcode">Zip/Postal Code Proximity</option>
                                                                
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-1 text-center">
                                                        <label>
                                                            using
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <select ng-model="selectedCallFlow.geoList" ng-focus="getGeoLocationList()" validate-blur-forza="Tracking Number Details, Location" ng-required="selectedCallFlow.routetype=='geo'" class="form-control" id="geolist" ng-disabled="!canModify || selectedCallFlow.quantity >1">
                                                            <option ng-selected="true" disabled value=""> -- Select -- </option>
                                                            <option value="{{loc.id}}" ng-repeat="loc in georoutelocations" ng-selected="selectedCallFlow.geoList == loc.id"> {{loc.name}}</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <a class="btn btn-default" href="#/set-legacy-location" target="_blank" ng-enabled="canModify ||selectedCallFlow.quantity >1">Manage Locations</a>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20" ng-show="selectedCallFlow.routeBy=='Npa' || selectedCallFlow.routeBy=='Zipcode'">
                                                    <div class="col-sm-10">
                                                        If the caller is more than:
                                                        <input style="width:95px;display:inline;" ng-model="selectedCallFlow.radius" validate-blur-forza="Tracking Number Details, Radius" class="form-control" value="" ng-required="selectedCallFlow.routeBy=='Npa' || selectedCallFlow.routeBy=='Zipcode'" ng-readonly="!canModify" decimals="1" min="0" max-numbers="6" max="99999.9"> miles from the nearest ring-to location, route calls to:
                                                        <input type="text" class="form-control" style="width:auto;display:inline;" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="selectedCallFlow.ringtoNum" ng-required="selectedCallFlow.routetype=='geo'" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify">
                                                    </div>
                                                </div>
    
                                                <div class="row mt20" ng-show="selectedCallFlow.routeBy=='Claimed'">
                                                    <div class="col-sm-10">
                                                        If zip code is unclaimed, route calls to:
                                                        <input type="text" class="form-control" style="width:auto;display:inline;" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="selectedCallFlow.ringtoNum" ng-required="selectedCallFlow.routetype=='geo'" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End georoute Tracking Number -->
    
                                            <!-- Percentage based Tracking Number -->
                                            <div class="col-sm-12" ng-show="selectedCallFlow.routetype=='PercentageBasedRoute'">
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.recordCall" icheck type="checkbox" ng-disabled="!canModify "> Record Call
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.recordCall">
                                                        <div class="col-sm-6">
                                                            <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                            <div class="col-sm-6">
                                                                <select ng-model="selectedCallFlow.playDisclaimer" class="form-control" id="source" ng-disabled="!canModify" ng-required="selectedCallFlow.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type percentage', this.options[this.selectedIndex].value);">
                                                                    <option value="" ng-disable="true">--Select--</option>
                                                                    <option value="before">Before voice prompt</option>
                                                                    <option value="after">After voice prompt</option>
                                                                    <option value="never">Never</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <!-- <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.voicePrompt1" icheck type="checkbox" ng-disabled="!canModify"> Play a voice prompt first
                                                            </label>
                                                        </div>
                                                    </div>
    
                                                    <div ng-show="selectedCallFlow.voicePrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSSelected">
                                                                <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="selectedCallFlow.voicePromptTTSText" ng-readonly="!canModify || !TTSSelected" ng-change="voiceTextChange()" ng-required="selectedCallFlow.voicePrompt1 && TTSSelected" ng-maxlength="512" maxlength="512">
                                                            </div>
                                                        <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-show="!TTSSelected" align="left">Selected Audio Filename: {{selectedCallFlow.voicePromptText}}</div>
                                                        <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                            <a class="btn btn-default btn-sm" style="" ng-show="TTSSelected  || hasValidVoiceURL" ng-disabled="!canModify || !hasValidVoiceURL || audioIsPlaying('prompt') || audioIsDownloading()" ng-click="playVoiceAudio(selectedCallFlow.voiceURL)">{{ (promptAudio === undefined || promptAudio.paused || promptAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(promptAudio === undefined || promptAudio.paused || promptAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                            <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-click="showVoiceModal('lg')" ng-disabled="!canModify" ng-show="TTSSelected ">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a> -->
                                                            <!-- button to remove audio recording -->
                                                           <!--  <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-show="!TTSSelected " ng-disabled="!canModify" ng-click="removeSelectedVoiceAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                        </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.whisperPrompt1" icheck type="checkbox" value="" ng-disabled="!canModify"> Play whisper message before connecting
                                                            </label>
                                                        </div>
                                                    </div>
    
                                                    <div ng-show="selectedCallFlow.whisperPrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-8" ng-show="TTSWhisperSelected">
                                                                <input type="text" class="form-control" placeholder="Example: You are receiving a call from Mailer 1a" value="" validate-blur-forza="Tracking Number Details, Whisper message" ng-model="selectedCallFlow.whisperTTSText" ng-readonly="!canModify || !TTSWhisperSelected" ng-required="selectedCallFlow.whisperPrompt1 && TTSWhisperSelected" ng-change="whisperTextChange()">
                                                            </div>
                                                            <div class="col-sm-8" ng-hide="TTSWhisperSelected" align="left">Selected Audio Filename:{{selectedCallFlow.whisperText}}</div>
                                                            <div class="col-sm-4">
                                                                <a class="btn btn-default " style="" ng-show="TTSWhisperSelected || hasValidWhisperURL" ng-disabled="!canModify || audioIsPlaying('whisper') || audioIsDownloading() || !hasValidWhisperURL" ng-click="playWhisperAudio(selectedCallFlow.whisperURL)">{{ (whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-click="showWhisperModal('lg')" ng-disabled="!canModify" ng-show="TTSWhisperSelected">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a> -->
                                                                <!-- button to remove audio recording -->
                                                             <!--    <a class="btn btn-default " style="margin-left:15px;" ng-show="!TTSWhisperSelected" ng-disabled="!canModify" ng-click="removeSelectedWhisperAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                </div>
     -->
    
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.voicePrompt1" icheck type="checkbox" ng-disabled="!canModify"> Play a voice prompt
                                                            </label>
                                                        </div>
                                                    </div>
    
                                                    <div ng-show="selectedCallFlow.voicePrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-8 mb10" ng-hide="!TTSSelected">
                                                                <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="selectedCallFlow.voicePromptTTSText" ng-readonly="!canModify || !TTSSelected" ng-change="voiceTextChange()" ng-required="selectedCallFlow.voicePrompt1 && TTSSelected" ng-maxlength="512" maxlength="512">
                                                            </div>
                                                        <div class="col-sm-8 mb10" style="word-wrap: break-word;" ng-show="!TTSSelected" align="left">Selected Audio Filename: {{selectedCallFlow.voicePromptText}}</div>
                                                        <div class="col-sm-4">
                                                            <a class="btn btn-default " style="" ng-show="TTSSelected  || hasValidVoiceURL" ng-disabled="!canModify || !hasValidVoiceURL || audioIsPlaying('prompt') || audioIsDownloading()" ng-click="playVoiceAudio(selectedCallFlow.voiceURL)">{{ (promptAudio === undefined || promptAudio.paused || promptAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(promptAudio === undefined || promptAudio.paused || promptAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                            <a class="btn btn-default " style="margin-left:15px;" ng-click="showVoiceModal('lg')" ng-disabled="!canModify" ng-show="TTSSelected ">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                            <!-- button to remove audio recording -->
                                                            <a class="btn btn-default" style="margin-left:15px;" ng-show="!TTSSelected " ng-disabled="!canModify" ng-click="removeSelectedVoiceAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                        </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.whisperPrompt1" icheck type="checkbox" value="" ng-disabled="!canModify"> Play whisper message before connecting
                                                            </label>
                                                        </div>
                                                    </div>
    
                                                    <div ng-show="selectedCallFlow.whisperPrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-8" ng-show="TTSWhisperSelected">
                                                                <input type="text" class="form-control" placeholder="Example: You are receiving a call from Mailer 1a" value="" validate-blur-forza="Tracking Number Details, Whisper message" ng-model="selectedCallFlow.whisperTTSText" ng-readonly="!canModify || !TTSWhisperSelected" ng-required="selectedCallFlow.whisperPrompt1 && TTSWhisperSelected" ng-change="whisperTextChange()">
                                                            </div>
                                                            <div class="col-sm-8" ng-hide="TTSWhisperSelected" style="word-wrap: break-word;" align="left">Selected Audio Filename:{{selectedCallFlow.whisperText}}</div>
                                                            <div class="col-sm-4">
                                                                <a class="btn btn-default " style="" ng-show="TTSWhisperSelected || hasValidWhisperURL" ng-disabled="!canModify || audioIsPlaying('whisper') || audioIsDownloading() || !hasValidWhisperURL" ng-click="playWhisperAudio(selectedCallFlow.whisperURL)">{{ (whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(whisperAudio === undefined || whisperAudio.paused || whisperAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-click="showWhisperModal('lg')" ng-disabled="!canModify" ng-show="TTSWhisperSelected">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                <!-- button to remove audio recording -->
                                                                <a class="btn btn-default " style="margin-left:15px;" ng-show="!TTSWhisperSelected" ng-disabled="!canModify" ng-click="removeSelectedWhisperAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-md-6 col-sm-12">
                                                        <div class="row">
                                                            <div class="col-md-7 col-sm-5">
                                                                <label class="control-label">Ring to Phone Number</label>
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[0].ringtonum" check-duplicate="0" ng-readonly="percentageRingtoNum[0].readonly" data-inputmask="'mask':'(999) 999-9999'" minlength="10" ng-readonly="!canModify" ng-required="selectedCallFlow.routetype=='PercentageBasedRoute'" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <label class="control-label">Percent of Calls</label>
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[0].percentage" ng-readonly="percentageRingtoNum[0].readonly" ng-required="selectedCallFlow.routetype=='PercentageBasedRoute'" ng-blur="percentageCount(0)" data-inputmask="'mask':'99%'" maxlength="2" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" rowid="1" ng-enter="percentageCount(0)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 1">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[1].ringtonum" check-duplicate="1" ng-readonly="percentageRingtoNum[1].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage1" ng-readonly="!canModify" ng-required="numPer >= 1" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[1].percentage" ng-readonly="percentageRingtoNum[1].readonly" ng-blur="percentageCount(1)" data-inputmask="'mask':'99%'" maxlength="2" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" rowid="2" ng-required="numPer >= 1" ng-enter="percentageCount(1)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(1)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 2">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" check-duplicate="2" maskinput ng-model="percentageRingtoNum[2].ringtonum" ng-readonly="percentageRingtoNum[2].readonly" id="percentage2" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify" ng-required="numPer >= 2" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" ng-model="percentageRingtoNum[2].percentage" validate-blur-forza="Tracking Number Details, Percentage" ng-readonly="percentageRingtoNum[2].readonly" ng-blur="percentageCount(2)" data-inputmask="'mask':'99%'" maxlength="2" rowid="3" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 2" ng-enter="percentageCount(2)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(2)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 3">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[3].ringtonum" check-duplicate="3" ng-readonly="percentageRingtoNum[3].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage3" ng-readonly="!canModify" ng-required="numPer >= 3" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[3].percentage" ng-readonly="percentageRingtoNum[3].readonly" ng-blur="percentageCount(3)" rowid="4" data-inputmask="'mask':'99%'" maxlength="2" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 3" ng-enter="percentageCount(3)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(3)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20 mb20" ng-hide="numPer < 4">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[4].ringtonum" check-duplicate="4" ng-readonly="percentageRingtoNum[4].readonly" id="percentage4" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify" ng-required="numPer >= 4" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[4].percentage" ng-readonly="percentageRingtoNum[4].readonly" ng-blur="percentageCount(4)" data-inputmask="'mask':'99%'" maxlength="2" rowid="5" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 4" ng-enter="percentageCount(4)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(4)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-sm-12">
                                                        <div class="row" ng-hide=" numPer < 5">
                                                            <div class="col-md-7 col-sm-5">
                                                                <label class="control-label hidden-sm hidden-xs" ng-hide=" numPer < 5">Ring to Phone Number</label>
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[5].ringtonum" check-duplicate="5" ng-readonly="percentageRingtoNum[5].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage5" ng-readonly="!canModify" ng-hide="numPer < 5" ng-required="numPer >= 5" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <label class="control-label hidden-sm hidden-xs" ng-hide=" numPer < 5">Percent of Calls</label>
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[5].percentage" ng-readonly="percentageRingtoNum[5].readonly" ng-blur="percentageCount(5)" data-inputmask="'mask':'99%'" maxlength="2" rowid="6" ng-readonly="!canModify" ng-hide="numPer < 5" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 5" ng-enter="percentageCount(5)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <label class="control-label hidden-sm hidden-xs">&nbsp;</label>
                                                                <div>
                                                                    <a title="Delete" ng-hide=" numPer < 5" ng-click="removePercentNumber(5)"><i class="fa fa-times-circle"></i></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 6">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[6].ringtonum" check-duplicate="6" ng-readonly="percentageRingtoNum[6].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage6" ng-readonly="!canModify" ng-required="numPer >= 6" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[6].percentage" ng-readonly="percentageRingtoNum[6].readonly" ng-blur="percentageCount(6)" data-inputmask="'mask':'99%'" maxlength="2" rowid="7" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 6" ng-enter="percentageCount(6)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(6)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 7">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[7].ringtonum" check-duplicate="7" ng-readonly="percentageRingtoNum[7].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage7" ng-readonly="!canModify" ng-required="numPer >= 7" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[7].percentage" ng-readonly="percentageRingtoNum[7].readonly" ng-blur="percentageCount(7)" rowid="8" data-inputmask="'mask':'99%'" maxlength="2" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 7" ng-enter="percentageCount(7)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(7)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 8">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[8].ringtonum" check-duplicate="8" ng-readonly="percentageRingtoNum[8].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage8" ng-readonly="!canModify" ng-required="numPer >= 8" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6" ng-hide="numPer < 8">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[8].percentage" ng-readonly="percentageRingtoNum[8].readonly" ng-blur="percentageCount(8)" data-inputmask="'mask':'99%'" maxlength="2" rowid="9" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 8" ng-enter="percentageCount(8)" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(8)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                        <div class="row mt20" ng-hide="numPer < 9">
                                                            <div class="col-md-7 col-sm-5">
                                                                <div class="">
                                                                    <input type="text" class="form-control" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="percentageRingtoNum[9].ringtonum" check-duplicate="9" ng-readonly="percentageRingtoNum[9].readonly" data-inputmask="'mask':'(999) 999-9999'" id="percentage9" ng-readonly="!canModify" ng-required="numPer >= 9" focus>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4 col-sm-6">
                                                                <div class="">
                                                                    <input type="number" class="form-control" validate-blur-forza="Tracking Number Details, Percentage" ng-model="percentageRingtoNum[9].percentage" ng-readonly="percentageRingtoNum[9].readonly" ng-blur="percentageCount(9)" data-inputmask="'mask':'99%'" maxlength="2" ng-readonly="!canModify" ng-maxlength="2" maxlength="2" min="1" max="99" oninput="maxLengthCheck(this)" ng-required="numPer >= 9" ng-pattern="/^[0-9]+$/">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-1 col-sm-1">
                                                                <a title="Delete" ng-click="removePercentNumber(9)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End Percentage based Tracking Number -->
    
                                            <!-- Begin IVR Tracking Number -->
                                            <div class="col-sm-12" ng-show="selectedCallFlow.routetype=='ivr'">
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-sm-offset-1">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input ng-model="selectedCallFlow.voicePrompt1" icheck type="checkbox" ng-disabled="!canModify"> Play a voice prompt
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div ng-show="selectedCallFlow.voicePrompt1">
                                                        <div class="col-sm-8">
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSSelected">
                                                                <input type="text" class="form-control" placeholder="Example: Press 1 for x department, Press 2 for..." value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="selectedCallFlow.voicePromptTTSText" ng-readonly="!canModify || !TTSSelected" ng-change="voiceTextChange()" ng-required="selectedCallFlow.voicePrompt1 && TTSSelected" ng-maxlength="512" maxlength="512">
                                                            </div>
                                                            <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" style="word-wrap: break-word;" ng-show="!TTSSelected" align="left">Selected Audio Filename: {{selectedCallFlow.voicePromptText}}</div>
                                                            <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                                <a class="btn btn-default btn-sm" style="" ng-show="TTSSelected  || hasValidVoiceURL" ng-disabled="!canModify || !hasValidVoiceURL  || audioIsPlaying('prompt') || audioIsDownloading()" ng-click="playVoiceAudio(selectedCallFlow.voiceURL)">{{ (promptAudio === undefined || promptAudio.paused || promptAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(promptAudio === undefined || promptAudio.paused || promptAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-click="showVoiceModal('lg')" ng-disabled="!canModify" ng-show="TTSSelected ">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                <!-- button to remove audio recording -->
                                                                <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-show="!TTSSelected " ng-disabled="!canModify" ng-click="removeSelectedVoiceAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                    <div class="col-sm-3 col-xs-3">
                                                        <h2>Key Press</h2>
                                                    </div>
                                                    <div class="col-sm-3 col-xs-3">
                                                        <h2>Action</h2>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20">
                                                            <ul class="timeline">
                                                                <li class="timeline-midnightblue" ng-repeat="cAction in ivrActions" ng-readonly="!canModify">
                                                                    <div class="timeline-icon"><i class="fa">{{cAction.id}}</i></div>
                                                                    <div class="timeline-body">
                                                                        <a ng-click="removeIvrAction(cAction.id)" ng-show="cAction.id != 1" title="delete"><i class="fa fa-times" style="float:right;"></i></a>
                                                                        <div class="timeline-content">
                                                                            <div class="row mb20">
                                                                                <div class="col-lg-1 col-md-2 col-sm-2">
                                                                                    <label>
                                                                                        Destination:
                                                                                    </label>
                                                                                </div>
                                                                                <div class="col-sm-3">
                                                                                    <input type="text" class="form-control" value="" ng-model="cAction.ringtoname" ng-maxlength="50" validate-blur-forza="Tracking Number Details, Destination" ng-readonly="!canModify" ng-required="selectedCallFlow.routetype=='ivr'">
                                                                                </div>
                                                                            </div>
                                                                            <div class="row mb20">
                                                                                <div class="col-sm-6">
                                                                                    <select class="form-control" ng-model="cAction.action" id="cAction.action" ng-disabled="!canModify" ng-required="selectedCallFlow.routetype=='ivr'" validate-blur-forza="Tracking Number Details, Key option" ng-change="showSubmit()">
                                                                                        <option value="" ng-selected="true" disabled>-- Select -- </option>
                                                                                        <option ng-repeat="item in qCallFlowList" value="{{item.value}}" ng-selected="item.value == cAction.action">{{item.name}}</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <!-- Forward to phone number starts here -->
                                                                            <div class="col-sm-12 mb20" ng-show="cAction.action=='qSimple'">
                                                                                <div class="row mt0">
                                                                                    <div class="row mt10">
                                                                                        <div class="col-sm-3 col-sm-offset-1">
                                                                                            <div class="checkbox">
                                                                                                <label>
                                                                                                    <input ng-model="cAction.recordCall" icheck type="checkbox" ng-disabled="!canModify"> Record Call
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div ng-show="cAction.recordCall">
                                                                                            <div class="col-sm-6">
                                                                                                <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                                                                <div class="col-sm-6">
                                                                                                    <select ng-model="cAction.playDisclaimer" class="form-control" id="source" ng-disabled="!canModify" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type IVRsimple', this.options[this.selectedIndex].value);" ng-required="cAction.action=='qSimple' && cAction.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer">
                                                                                                        <option value="" ng-disable="true">--Select--</option>
                                                                                                        <option value="before">Before voice prompt</option>
                                                                                                        <option value="after">After voice prompt</option>
                                                                                                        <option value="never">Never</option>
                                                                                                    </select>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row mt20">
                                                                                        <div class="col-sm-3 col-sm-offset-1">
                                                                                            <div class="checkbox">
                                                                                                <label>
                                                                                                    <input ng-model="cAction.voiceprompt" icheck type="checkbox" value="" ng-disabled="!canModify"> Play a voice prompt on selection
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div ng-show="cAction.voiceprompt">
                                                                                            <div class="col-sm-8">
                                                                                                <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSIVRSelected[$index]">
                                                                                                    <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="cAction.voicepromptTTSText" ng-readonly="!canModify  " ng-change="voiceTextIVRChange($index)" ng-required="cAction.action=='qSimple' && cAction.voiceprompt && TTSIVRSelected[$index]">
                                                                                                </div>
                                                                                                <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" style="word-wrap: break-word;" ng-show="!TTSIVRSelected[$index]" align="left">Selected Audio Filename: {{cAction.voicepromptText}}</div>
                                                                                                <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                                                                    <a class="btn btn-default btn-sm" style="" ng-show="TTSIVRSelected[$index] || hasValidTTSVoiceURL[$index]" ng-disabled="!canModify || audioIsPlaying('ivr') || audioIsDownloading() || (!cAction.voicepromptTTSText.length && !hasValidTTSVoiceURL[$index])" ng-click="playTTSVoiceAudio($index)">{{ (ivrActions[$index].ivrAudio === undefined || ivrActions[$index].ivrAudio.paused || ivrActions[$index].ivrAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(ivrActions[$index].ivrAudio === undefined || ivrActions[$index].ivrAudio.paused || ivrActions[$index].ivrAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                                                    <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-click="showIVRVoiceModal('lg',$index)" ng-disabled="!canModify" ng-show="TTSIVRSelected[$index]">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                                                    <!-- button to remove audio recording -->
                                                                                                    <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-show="!TTSIVRSelected[$index]" ng-disabled="!canModify" ng-click="removeSelectedIVRVoiceAudio($index)">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <!--<div class="row mt20">
                                                                      <div class="col-sm-3 col-sm-offset-1">
                                                                         <div class="checkbox">
                                                                          <label>
                                                                            <input ng-model="cAction.webhook" icheck type="checkbox" value="" ng-disabled="!canModify">
                                                                            Send a Webhook
                                                                          </label>
                                                                        </div>
                                                                          <div ng-show="cAction.webhook">
                                                                            <div class="col-sm-3">
                                                                              <div class="col-sm-12">
                                                                                <select ng-model="triggerWebhook" class="form-control" id="source" ng-disabled="!canModify">
                                                                                  <option value="webhook1">Webhook 1</option>
                                                                                  <option value="webhook2">Webhook 2</option>
                                                                                  <option value="webhook3">Webhook 3</option>
                                                                                </select>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                        </div>
                                                                     </div>-->
                                                                                    <div class="row mt20">
                                                                                        <div class="col-sm-3 col-xs-3">
                                                                                            <label>
                                                                                                Ring to Phone Number:
                                                                                            </label>
                                                                                        </div>
                                                                                        <div class="col-sm-3 col-xs-3 col-md-3 col-lg-2">
                                                                                            <input type="text" class="form-control" value="" ng-model="cAction.ringtoNum" checklength="10" validate-blur-forza="Tracking Number Details, Ring to Phone Number" maskinput data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify" ng-required="cAction.action=='qSimple'">
                                                                                        </div>
                                                                                        <!-- <div class="col-sm-2">
                                                                        <div class="checkbox">
                                                                          <label>
                                                                            <input ng-model="cAction.filterCalls" icheck type="checkbox" value="" ng-disabled="!canModify">
                                                                            Filter spam calls
                                                                          </label>
                                                                        </div>
                                                                      </div> -->
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <!-- Forward to phone number ends here -->
                                                                            <!-- Forward to nearest location starts here -->
                                                                            <div class="col-sm-12 mb20" ng-show="cAction.action=='qGeo'">
                                                                                <div class="row mt0">
                                                                                    <div class="row mt10">
                                                                                        <div class="col-sm-3 col-sm-offset-1">
                                                                                            <div class="checkbox">
                                                                                                <label>
                                                                                                    <input ng-model="cAction.recordCall" icheck type="checkbox" ng-disabled="!canModify"> Record Call
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div ng-show="cAction.recordCall">
                                                                                            <div class="col-sm-6">
                                                                                                <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                                                                <div class="col-sm-6">
                                                                                                    <select ng-model="cAction.playDisclaimer" class="form-control" id="source" ng-disabled="!canModify" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type IVRgeo', this.options[this.selectedIndex].value);" ng-required="cAction.action=='qGeo' && cAction.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer">
                                                                                                        <option value="" ng-disable="true">--Select--</option>
                                                                                                        <option value="before">Before voice prompt</option>
                                                                                                        <option value="after">After voice prompt</option>
                                                                                                        <option value="never">Never</option>
                                                                                                    </select>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <!-- <div class="row mt20">
                                                                      <div class="col-sm-3 col-sm-offset-1">
                                                                        <div class="checkbox">
                                                                          <label>
                                                                            <input ng-model="cAction.voiceprompt" icheck type="checkbox" value="" ng-disabled="!canModify">
                                                                            Play a voice prompt first
                                                                          </label>
                                                                        </div>
                                                                      </div>
                                                                      <div ng-show="cAction.voiceprompt">
                                                                        <div class="col-sm-8">
                                                                          <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSIVRSelected[$index]">
                                                                            <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="cAction.voicepromptTTSText" ng-readonly="!canModify  " ng-change="voiceTextIVRChange($index)" ng-required="cAction.action=='qGeo' && cAction.voiceprompt && TTSIVRSelected[$index]">
                                                                          </div>
                                                                          <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-show="!TTSIVRSelected[$index]" align="left">Selected Audio Filename: {{cAction.voicepromptText}}</div>
                                                                          <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12" >
                                                                            <a class="btn btn-default btn-sm" style="" ng-show="TTSIVRSelected[$index] || hasValidTTSVoiceURL[$index]" ng-disabled="!canModify" ng-click="playTTSVoiceAudio($index)">Play<i class="fa fa-play" style="margin-left:5px;"></i></a>
                                                                            <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-click="showIVRVoiceModal('lg',$index)" ng-disabled="!canModify" ng-show="TTSIVRSelected[$index]">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                            <!-- button to remove audio recording -->
                                                                                    <!--                                                                     <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-show="!TTSIVRSelected[$index]" ng-disabled="!canModify" ng-click="removeSelectedIVRVoiceAudio($index)">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                                          </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>-->
                                                                                    <div class="row mt20">
                                                                                        <!--<div class="col-sm-3">
                                                                        <label>
                                                                          Ring to Name:
                                                                        </label>
                                                                      </div>
                                                                      <div class="col-sm-2">
                                                                                                <input type="text" class="form-control" value="" ng-model="cAction.ringtoname" ng-maxlength="50"  validate-blur-forza="Tracking Number Details, Ring to Name"  ng-readonly="!canModify"
                                                                        ng-required="cAction.action=='qGeo'">
                                                                      </div>
                                                                       <div ng-show="cAction.webhook">
                                                                        <div class="col-sm-3">
                                                                          <div class="col-sm-12">
                                                                            <select ng-model="triggerWebhook" class="form-control" id="source" ng-disabled="!canModify">
                                                                              <option value="webhook1">Webhook 1</option>
                                                                              <option value="webhook2">Webhook 2</option>
                                                                              <option value="webhook3">Webhook 3</option>
                                                                            </select>
                                                                          </div>
                                                                        </div>
                                                                      </div> -->
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row mt20">
                                                                                    <div class="col-sm-1">
                                                                                        <label>
                                                                                            Route by:
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-sm-3 col-xs-4">
                                                                                        <select ng-model="cAction.routeBy" validate-blur-forza="Tracking Number Details, Route By" style="" class="form-control" id="source" ng-required="cAction.action=='qGeo'" ng-disabled="!canModify">
                                                                                            <option selected disabled value=""> -- Select a List-- </option>
                                                                                            <option value="Npa">Area Code Proximity</option>
                                                                                            <option value="Claimed">Zip Code Claimed</option>
                                                                                            <option value="Zipcode">Zip Code Proximity</option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-xs-2 col-sm-1 text-center">
                                                                                        <label>
                                                                                            using
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-sm-3 col-xs-3 col-md-3 col-lg-2">
                                                                                        <select ng-model="cAction.geoList" validate-blur-forza="Tracking Number Details, Location" ng-required="cAction.action=='qGeo'" class="form-control" id="geolist" ng-disabled="!canModify">
                                                                                            <option ng-selected="true" disabled value=""> -- Select -- </option>
                                                                                            <option value="{{loc.id}}" ng-selected="loc.id == cAction.geoList" ng-repeat="loc in georoutelocations"> {{loc.name}}</option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-sm-2">
                                                                                        <a class="btn btn-default" href="#/set-legacy-location" target="_blank" ng-enabled="canModify">Manage Locations</a>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row mt20" ng-show="cAction.routeBy=='Npa' || cAction.routeBy=='Zipcode'">
                                                                                    <div class="col-sm-12">
                                                                                        If the caller is more than:
                                                                                        <input style="width:85px;display:inline;" ng-model="cAction.radius" validate-blur-forza="Tracking Number Details, Radius" class="form-control" value="" ng-required="cAction.routeBy=='Npa' || cAction.routeBy=='Zipcode'" ng-readonly="!canModify" decimals="1" max-numbers="6" min="0" max="99999.9">
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        miles from the nearest ring-to location, route calls to:
                                                                                        <input type="text" class="form-control" style="width:auto;display:inline;" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="cAction.ringtoNum" ng-required="(cAction.routeBy=='Npa' || cAction.routeBy=='Zipcode') && cAction.action=='qGeo'" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify">
                                                                                    </div>
                                                                                    <!-- <div class="col-sm-2">
                                                                        <div class="checkbox">
                                                                          <label>
                                                                            <input ng-model="cAction.filterCalls" icheck type="checkbox" value="" ng-disabled="!canModify">
                                                                            Filter spam calls
                                                                          </label>
                                                                        </div>
                                                                    </div> -->
                                                                                </div>
                                                                                <div class="row mt20" ng-show="cAction.routeBy=='Claimed'">
                                                                                    <div class="col-sm-10">
                                                                                        If zip code is unclaimed, route calls to:
                                                                                        <input type="text" class="form-control" style="width:auto;display:inline;" validate-blur-forza="Tracking Number Details, Ring to Phone Number" checklength="10" maskinput ng-model="cAction.ringtoNum" ng-required="cAction.routeBy=='Claimed'" data-inputmask="'mask':'(999) 999-9999'" ng-readonly="!canModify">
                                                                                    </div>
                                                                                    <!-- <div class="col-sm-2">
                                                                        <div class="checkbox">
                                                                          <label>
                                                                            <input ng-model="cAction.filterCalls" icheck type="checkbox" value="" ng-disabled="!canModify">
                                                                            Filter spam calls
                                                                          </label>
                                                                        </div>
                                                                    </div> -->
                                                                                </div>
                                                                            </div>
                                                                            <!-- Forward to nearest location ends here -->
                                                                            <!-- Hangup starts here -->
                                                                            <div class="col-sm-12 mb20" ng-show="cAction.action=='qHangup'">
                                                                                <div class="row mt0">
                                                                                    <div class="row mt10">
                                                                                        <div class="col-sm-3 col-sm-offset-1">
                                                                                            <!--div class="checkbox">
                                                                          <label>
                                                                            <input ng-model="cAction.recordCall" icheck type="checkbox" ng-disabled="!canModify" >
                                                                            Record Call
                                                                          </label>
                                                                        </div>
                                                                      </div-->
                                                                                            <!--div ng-show="cAction.recordCall">
                                                                        <div class="col-sm-6">
                                                                          <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                                          <div class="col-sm-6">
                                                                            <select ng-model="cAction.playDisclaimer" class="form-control" id="source" ng-disabled="!canModify" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type IVRhangup', this.options[this.selectedIndex].value);" ng-required="cAction.action=='qHangup' && cAction.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer">
                                                                              <option value="" ng-disable="true">--Select--</option>
                                                                              <option value="before">Before voice prompt</option>
                                                                              <option value="after">After voice prompt</option>
                                                                              <option value="never">Never</option>
                                                                            </select>
                                                                          </div>
                                                                        </div>
                                                                      </div-->
                                                                                        </div>
                                                                                        <div class="row mt20">
                                                                                            <div class="col-sm-3 col-sm-offset-1">
                                                                                                <div class="checkbox">
                                                                                                    <label>
                                                                                                        <input ng-model="cAction.voiceprompt" icheck type="checkbox" value="" ng-disabled="!canModify"> Play a voice prompt on selection
                                                                                                    </label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div ng-show="cAction.voiceprompt">
                                                                                                <div class="col-sm-8">
                                                                                                    <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSIVRSelected[$index]">
                                                                                                        <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="cAction.voicepromptTTSText" ng-readonly="!canModify  " ng-change="voiceTextIVRChange($index)" ng-required="cAction.action=='qHangup' && cAction.voiceprompt && TTSIVRSelected[$index]">
                                                                                                    </div>
                                                                                                    <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-show="!TTSIVRSelected[$index]" style="word-wrap: break-word;" align="left">Selected Audio Filename: {{cAction.voicepromptText}}</div>
                                                                                                    <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                                                                        <a class="btn btn-default btn-sm" style="" ng-show="TTSIVRSelected[$index] || hasValidTTSVoiceURL[$index]" ng-disabled="!canModify" ng-click="playTTSVoiceAudio($index)">Play<i class="fa fa-play" style="margin-left:5px;"></i></a>
                                                                                                        <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-click="showIVRVoiceModal('lg',$index)" ng-disabled="!canModify" ng-show="TTSIVRSelected[$index]">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                                                        <!-- button to remove audio recording -->
                                                                                                        <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-show="!TTSIVRSelected[$index]" ng-disabled="!canModify" ng-click="removeSelectedIVRVoiceAudio($index)">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <!--<div class="row mt20">
                                                                      <div class="col-sm-3">
                                                                        <label>
                                                                          Ring to Name:
                                                                        </label>
                                                                      </div>
                                                                      <div class="col-sm-2">
                                                                                            e"
                                                                        ng-required="cAction.action=='qHangup'">
                                                                      </div>
                                                                    </div>-->
                                                                                    </div>
                                                                                </div>
                                                                                <!-- Hangup ends here -->
                                                                            </div>
                                                                            <div class="timeline-footer">
                                                                                <a class="btn btn-default btn-sm pull-left" ng-click="addAction()" ng-show="canModify">Add </a>
                                                                            </div>
                                                                        </div>
                                                                </li>
                                                            </ul>
                                                            </div>
                                                        </div>
                                            </div>
    
    
                                                <!-- Begin Hang Up Tracking Number -->
                                           <div class="col-sm-12" ng-show="selectedCallFlow.routetype=='hangup'">
                                                    <div class="row mt20">
                                                        <div class="col-sm-3 col-sm-offset-1">
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input ng-model="selectedCallFlow.recordCall" icheck type="checkbox" value="" ng-disabled="!canModify"> Record Call
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div ng-show="selectedCallFlow.recordCall">
                                                            <div class="col-sm-6">
                                                                <label class="col-sm-6 control-label">Play call recording disclaimer</label>
                                                                <div class="col-sm-6">
                                                                    <select class="form-control" id="source" ng-disabled="!canModify" ng-model="selectedCallFlow.playDisclaimer" ng-required="selectedCallFlow.recordCall" validate-blur-forza="Tracking Number Details, Play Disclaimer" onChange="ga('send', 'event', 'Form Event', 'Disclaimer Type hangup', this.options[this.selectedIndex].value);">
                                                                        <option value="" ng-disable="true">--Select--</option>
                                                                        <option value="before">Before voice prompt</option>
                                                                        <option value="after">After voice prompt</option>
                                                                        <option value="never">Never</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mt20">
                                                        <div class="col-sm-3 col-sm-offset-1">
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input ng-model="selectedCallFlow.voicePrompt1" icheck type="checkbox" ng-disabled="!canModify"> Play a voice prompt on selection
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div ng-show="selectedCallFlow.voicePrompt1">
                                                            <div class="col-sm-8">
                                                                <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" ng-hide="!TTSSelected">
                                                                    <input type="text" class="form-control" placeholder="Example: Please wait while we connect your call" value="" validate-blur-forza="Tracking Number Details, Voice Prompt" ng-model="selectedCallFlow.voicePromptTTSText" ng-readonly="!canModify || !TTSSelected" ng-change="voiceTextChange()" ng-required="selectedCallFlow.routetype=='hangup' &&selectedCallFlow.voicePrompt1 && TTSSelected" ng-maxlength="512" maxlength="512">
                                                                </div>
                                                                <div class="col-sm-12 col-lg-7 col-md-6 col-xs-12 mb10" style="word-wrap: break-word;" ng-show="!TTSSelected" align="left">Selected Audio Filename: {{selectedCallFlow.voicePromptText}}</div>
                                                                <div class="col-sm-12 col-lg-5 col-md-6 col-xs-12">
                                                                    <a class="btn btn-default btn-sm" style="" ng-show="TTSSelected  || hasValidVoiceURL" ng-disabled="!canModify || !hasValidVoiceURL" ng-click="playVoiceAudio(selectedCallFlow.voiceURL)">{{ (promptAudio === undefined || promptAudio.paused || promptAudio.ended ) ? 'Play' : 'Pause' }}<i class="{{(promptAudio === undefined || promptAudio.paused || promptAudio.ended) ? 'fa fa-play' : 'fa fa-pause'}}" style="margin-left:5px;"></i></a>
                                                                    <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-click="showVoiceModal('lg')" ng-disabled="!canModify" ng-show="TTSSelected ">Add<i class="fa fa-plus-circle" style="margin-left:5px;"></i></a>
                                                                    <!-- button to remove audio recording -->
                                                                    <a class="btn btn-default btn-sm" style="margin-left:15px;" ng-show="!TTSSelected " ng-disabled="!canModify" ng-click="removeSelectedVoiceAudio()">Remove<i class="fa fa-minus-circle" style="margin-left:5px;"></i></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                           </div>
                                        </div>
                                       </div>
                                         <!-- End Hang Up Tracking Number -->
                                           <div class="panel-footer text-right">
                                            <button class="btn btn-primary" type="submit" ng-disabled="(singlecallForm.$invalid && submitted1) || formSubmit1 || isDupliNoPercentage || !canModify|| (selectedCallFlow.quantity > 1 && isNew)"
                                                onClick="ga('send', 'event', { eventCategory: 'Campaign', eventAction: 'Click', eventLabel: 'Save Tracking Number'});"
                                                ng-click="bCreateAnother=false" style="margin-left:20px;">Save Tracking Number</button>
                                            <div style="display:inline;">
                                                <button class="btn btn-info" ng-model="bCreateAnother" ng-disabled="(singlecallForm.$invalid && submitted1) || formSubmit1 ||!canModify || (selectedCallFlow.quantity > 1 && isNew)"
                                                    ng-click="setCreateAnother()" onClick="ga('send', 'event', { eventCategory: 'Campaign', eventAction: 'Click', eventLabel: 'Save and Clone'});"
                                                    style="margin-left:20px;">Save and Clone</button>
                                            </div>  
                                           </div>
                                 </div>
                               </div>
                               </div>
                                                                        </form>
                                                        </div>
    
             <!-- callActions starts -->
                <div class="container-fluid" id="callActions" ng-controller="FormComponentsController">
                    <div class="row">
                        <div class="col-md-12" style="z-index: 200;">
                            <panel panel-class="panel-midnightblue" ng-show="showCallActions" data-heading="Call Actions for {{addCallAction.cfname}}">
                                <div class="col-md-12">
                                    <ul class="timeline">
                                    <li class="timeline-gray" ng-repeat="cAction in callActions">
                                        <div class="timeline-icon"><i class="fa">{{$index + 1}}</i></div>
                                        <div class="timeline-body">
                                            <a ng-show="canModify" ng-click="removeCallAction(cAction.id)" title="delete">
                                                <i class="fa fa-times" style="float:right;"></i>
                                            </a>
    
                                            <div class="timeline-header">
    
                                                <span class="date">{{ showNumber($index + 1) }} Action</span>
                                            </div>
                                            <div class="timeline-content">
                                                <div class="row">
                                                    <div class="col-sm-1">
                                                        <h3 style="display:inline;">If</h3>
    
                                                    </div>
                                                    <div class="col-sm-11">
                                                        <div ng-repeat="(key, rule) in ruleDropDown[cAction.id]">
                                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 col-sm-offset-1" ng-show="rule['join_type'] && key != 0" style="background:#e6e6e6;padding:1px 10px;margin-top:-1px;margin-bottom:-1px;border-left:1px solid #ccc;border-right:1px solid #ccc;z-index:100">
                                                                <div style="width:auto;display:inline;">
                                                                    <select autocomplete="off" enable-save dt-id="cAction.id" add-call-action="addCallAction" ng-options="join_type as join_type for join_type in rule['join_type']" style="width:100%;display:inline;border:none;" class="form-control" ng-change="loadNextValue('join_type', 'fields', cAction.id, {{key}})"
                                                                        ng-model="addCallAction.rule[cAction.id][key]['join_type']" ng-disabled="!canModify">
                                                                  <option ng-selected="true" disabled value=""> -- Optional -- </option>
                                                                  
                                                                </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-11 col-xs-10" style="background:#e6e6e6;min-height:58px;padding:10px;border:1px solid #ccc;border-radius:4px;">
                                                                <div style="width:auto;display:inline;" ng-show="rule['fields']">
                                                                    <!-- <select enable-save dt-id="cAction.id" add-call-action="addCallAction" style="width:auto;display:inline;border:none;" ng-change="loadNextValue('fields', 'operators',cAction.id, {{key}})" ng-model="addCallAction.rule[cAction.id][key]['fields']" class="form-control" ng-disabled="!canModify"> -->
                                                                    <select autocomplete="off" enable-save dt-id="cAction.id" add-call-action="addCallAction" ng-options="fields as fields for fields in rule['fields']" style="width:auto;display:inline;border:none;" ng-change="loadNextValue('fields', 'operators',cAction.id, {{key}})" ng-model="addCallAction.rule[cAction.id][key]['fields']"
                                                                        class="form-control" ng-disabled="!canModify">
                                                                    <option ng-selected="true" disabled value="action0"> -- Select -- </option>
                                                                  <!-- <option ng-selected="addCallAction.rule[cAction.id][key]['fields'] == fields" value="{{fields}}" ng-repeat="fields in rule['fields']"> {{fields}}</option> -->
                                                                </select>
                                                                </div>
    
                                                                <div style="width:auto;display:inline;" ng-show="rule['operators']">
                                                                    <!-- <select enable-save dt-id="cAction.id" add-call-action="addCallAction" style="width:auto;display:inline;border:none;" ng-change="loadNextValue('fields', 'enum', cAction.id, {{key}})" ng-model="addCallAction.rule[cAction.id][key]['operators']" class="form-control" ng-disabled="!canModify"> -->
                                                                    <select autocomplete="off" enable-save dt-id="cAction.id" add-call-action="addCallAction" ng-options="operator as operator for operator in rule['operators']" style="width:auto;display:inline;border:none;" ng-change="loadNextValue('fields', 'enum', cAction.id, {{key}})"
                                                                        ng-model="addCallAction.rule[cAction.id][key]['operators']" class="form-control" ng-disabled="!canModify">
                                                                        <option ng-selected="true" disabled value="action0"> -- Select -- </option>
                                                                        <!-- <option ng-selected="addCallAction.rule[cAction.id][key]['operators'] == operator" value="{{operator}}"  ng-repeat="operator in rule['operators']">{{operator}}</option> -->
                                                                </select>
                                                                </div>
                                                                <div style="width:auto;display:inline;" ng-show="rule['enum'].length > 0">
                                                                    <!-- <select enable-save dt-id="cAction.id" add-call-action="addCallAction" style="width:auto;display:inline;border:none;" class="form-control" ng-change="loadNextValue('fields', 'join_type', cAction.id, {{key}})" ng-model="addCallAction.rule[cAction.id][key]['enum']" ng-disabled="!canModify"> -->
                                                                    <select autocomplete="off" enable-save dt-id="cAction.id" add-call-action="addCallAction" ng-options="enum as enum for enum in rule['enum']" style="width:auto;display:inline;border:none;" class="form-control" ng-change="loadNextValue('fields', 'join_type', cAction.id, {{key}})"
                                                                        ng-model="addCallAction.rule[cAction.id][key]['enum']" ng-disabled="!canModify">
                                                                    <option ng-selected="true" disabled value="action0"> -- Select -- </option>
                                                                    <!-- <option ng-selected="addCallAction.rule[cAction.id][key]['enum'] == enum" value="{{enum}}" ng-repeat="enum in rule['enum']"> {{enum}}</option> -->
                                                                </select>
                                                                </div>
                                                                <div style="width:auto;display:inline;" ng-class="{'has-error' : errors[cAction.id][key] }" ng-show="rule['enum'].length === 0">
                                                                    <input style="width:150px;display:inline;" maxlength="255" enable-save dt-id="cAction.id" add-call-action="addCallAction" type="text" class="form-control" class="form-control" ng-keypress="loadNextValue('fields', 'join_type', cAction.id, key)" ng-model="addCallAction.rule[cAction.id][key]['enum']">
                                                                </div>
                                                                <a title="Delete" ng-show="showRemoveRule(addCallAction.rule[cAction.id]) && rule['fields'] && canModify" ng-click="removeRule(key, cAction.id)"><i class="fa fa-times-circle"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="row mt20 mb20">
                                                    <div class="col-sm-1">
                                                        <h3 style="display:inline;">Then</h3>
                                                    </div>
                                                    <div class="col-sm-11">
                                                        <div class="col-sm-11 col-xs-10" style="background:#e6e6e6;min-height:58px;padding:10px;border:1px solid #ccc;border-radius:4px;">
                                                            <div class="col-sm-4 col-xs-3">
                                                                <select style="width:auto;display:inline;border:none;vertical-align: top;" ng-model="   addCallAction.actionOptions[cAction.id]" class="form-control" id="source" dt-id="cAction.id" add-call-action="addCallAction" enable-save ng-disabled="!canModify" onChange="ga('send', 'event', 'Form Event', 'Call Action', this.options[this.selectedIndex].value);">
                                                                        <option disabled value="action0"> -- Select -- </option>
                                                                        <option value="email_alert">Send email alert to</option>
                                                                        <option value="sms_alert">Send SMS to</option>
                                                                        <option value="tag_call">Tag call as</option>
                                                                        <!-- <option value="post_event">Post a conversion event to</option> -->
                                                                        <option value="webhook">Trigger the webhook</option>
                                                                        <!-- <option value="post_detail">Send call details to</option> -->
                                                                        <option value="callback">Flag for call back</option>
                                                                        <option value="doubleclick" ng-show="dcSetting">Process call for DoubleClick</option>
                                                                        <option value="analytic" ng-show="gaSetting">Send call for Google Analytics</option>
                                                                    </select>
                                                            </div>
    
                                                            <div class="col-sm-8 col-xs-9">
                                                                <div style="display:inline;" ng-show="addCallAction.actionOptions[cAction.id]=='email_alert'">
                                                                    <tags-input id="tagInputIdGroup" track-by-expr="$index" ng-blur="countElement(cAction.id, $event)" ng-keydown="countElement(cAction.id, $event)" ng-click="countElement(cAction.id, $event)" style="width:250px;display:inline;" ng-model="addCallAction.email[cAction.id]"
                                                                        placeholder="{{addCallAction.email[cAction.id].length>0 ? '' : 'email@example.com'}}" dt-id="cAction.id" class="tags-div" maxLength=1024 add-call-action="addCallAction" ng-paste="countElement(cAction.id, $event)"
                                                                        add-on-paste="true" key-property="id" display-property="text" placeholder="" value="" add-on-paste="true" on-tag-added="tagAdded(cAction.id, $tag)" template="my-custom-template"></tags-input>
                                                                    <input readonly type="text" id="remainingNum" class="form-control" ng-model="addCallAction.remainingText[cAction.id]">
                                                                </div>
                                                                <div style="display:inline;" ng-show="addCallAction.actionOptions[cAction.id]=='sms_alert'" ng-class="{'has-error' : invalidNumber }">
                                                                    <input type="text" id="smsNumber" ng-model="addCallAction.phone[cAction.id]" style="width:250px;display:inline;" dt-id="cAction.id" add-call-action="addCallAction" enable-save class="form-control" maskinput data-inputmask="'mask':'(999) 999-9999'" ng-maxlength="14"
                                                                        ng-minlength="14">
                                                                </div>
                                                                <div style="display:inline;" ng-show="addCallAction.actionOptions[cAction.id]=='tag_call'">
                                                                    <select ui-select2="select2Options(cAction.id)" ng-model="addCallAction.tagList[cAction.id]" ng-change="enableSave(cAction.id)" multiple style="width:50%;" ng-disabled="!canModify">
                                                                        <option value="{{tag.tag_id}}" ng-repeat="tag in callActionTaggingOptions"> {{tag.tag_name}}</option>
                                                                    </select>
                                                                </div>
                                                                <div style="display:inline;" ng-show="addCallAction.actionOptions[cAction.id]=='post_event'">
                                                                    <select style="width:auto;display:inline;border:none;" dt-id="cAction.id" add-call-action="addCallAction" enable-save class="form-control" id="postTo" ng-model="addCallAction.postEvent[cAction.id]" ng-disabled="!canModify">
                                                                            <option selected disabled value="action0"> -- Select -- </option>
                                                                            <option value="email_alert">Acquisio</option>
                                                                            <option value="sms_alert">Kenshoo</option>
                                                                            <option value="doubleclick" ng-show="dcSetting">DoubleClick</option>
                                                                            <option value="tag_call">Google Adwords</option>
                                                                            <option value="post_event">Marin</option>
                                                                        </select>
                                                                </div>
                                                                <div style="display:inline;" ng-show="addCallAction.actionOptions[cAction.id]=='webhook'">
                                                                    <select style="width:auto;display:inline;border:none;" dt-id="cAction.id" add-call-action="addCallAction" enable-save class="form-control" id="triggerWebhook" ng-model="addCallAction.webhook[cAction.id]" ng-disabled="!canModify">
                                                                            <option ng-selected="true" disabled value=""> -- Select -- </option>
                                                                            <option ng-selected="wbhk.webhook_id == addCallAction.webhook[cAction.id]" value="{{wbhk.webhook_id}}" ng-repeat="wbhk in callActionWebhookOptions"> {{wbhk.webhook_name}}</option>
                                                                    </select>
                                                                    <!-- /#/set-webhook -->
                                                                    <a href="/#/set-webhook" target="_blank"><i class="fa fa-link" title="Jump to Webhook Settings"></i></a>
                                                                </div>
                                                                <div class="col-sm-6" ng-show="addCallAction.actionOptions[cAction.id]=='post_detail'">
                                                                    <select style="width:auto;display:inline;" dt-id="cAction.id" add-call-action="addCallAction" enable-save class="form-control" id="sendCDRto" ng-model="addCallAction.sendCallDetails[cAction.id]" ng-disabled="!canModify">
                                                                            <option selected disabled value="action0"> -- Select -- </option>
                                                                            <option value="email_alert">Salesforce</option>
                                                                            <option value="sms_alert">Marketo</option>
                                                                            <option value="tag_call">Zapier</option>
                                                                        </select>
                                                                </div>
                                                                <div style="display:inline;" ng-show="addCallAction.actionOptions[cAction.id]=='callback'">
                                                                    <input type="hidden" style="width:50%;display:inline;margin-left:20px" dt-id="cAction.id" add-call-action="addCallAction" enable-save class="form-control" id="callbackFlag" ng-model="addCallAction.callbackFlag[cAction.id]" value="">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                            </div>
                                            <div class="timeline-footer text-right">
                                                <div ng-show="callActions.length < 10">
                                                    <a class="btn btn-inverse pull-left" ng-show="callActions.length == ($index + 1)" ng-click="addNewCallAction(cAction.id)" ng-disabled="!canModify || !addNewStep" onClick="ga('send', 'event', { eventCategory: 'Button', eventAction: 'Click', eventLabel: 'Add Call Action'});">Add Action</a>
                                                </div>
                                            </div>
                                    </li>
                                </ul>
                                </div>
                                <button class="btn btn-primary" type="button" ng-disabled="disableSaveButton" ng-click="saveCallAction(cAction.id, false)" style="float:right;" align="left" onClick="ga('send', 'event', { eventCategory: 'Button', eventAction: 'Click', eventLabel: 'Save Group Details'});">Save</button>
                            </panel>
                        </div>
                    </div>
                </div>
                <!-- call action end -->
            </div>
        </div>
    </div>
