<div id="page-heading"><h1>DoubleClick</h1><div class="options"><div class="btn-toolbar"></div></div></div><div class="container-fluid" ng-controller="DoubleClickController"><div class="row"><page-loader is-loading-api="isLoadingApi"></page-loader><div class="col-md-12"><div class="container-fluid"><form name="doubleclickForm" id="doubleclickForm" valid-submit="setProfile()" novalidate><input type="hidden" name="doubleclick_id" ng-model="doubleclick_id"><div class="panel panel-midnightblue"><div class="panel-body no-border collapse in"><div class="row"><div class="col-md-12"><p><span>This integration allows you to map call data associated with DoubleClick ad conversions to custom Floodlight variables in your DoubleClick Search account. Prior to enabling this feature, please contact your DoubleClick account manager to authorize integrations@messages.service to post data to your DoubleClick Search account and create your custom Floodlight variables to identically match the settings on your integrations setup page.</span></p></div></div><div class="form-group row"><div class="col-lg-1 col-md-2 col-sm-12 mt10"><label class="control-label" style="padding-top:8px;">Active?</label><div class=""><toggle-switch ng-model="dc_active" on-label="Yes" off-label="No" class="primary switch"><toggle-switch></toggle-switch></toggle-switch></div></div><div class="col-lg-2 col-md-2 col-sm-8 mt20"><label class="control-label">Conversion Type:</label><div class=""><select ng-model="conversion_type" style="" class="form-control" name="conversion_type" id="conversion_type" required validate-blur-forza="Double Click,Conversion Type"><option selected="selected" disabled="disabled" value="action0">-- Select --</option><option value="action">Action</option><option value="transaction">Transaction</option></select></div></div><div class="col-lg-1 col-md-2 col-sm-4 mt20" ng-show="conversion_type=='transaction'"><label class="control-label">Currency:</label> <select ng-required="$scope.transaction == transaction" style="width:100%;display:inline;" class="form-control" ng-model="currency" name="currency" validate-blur-forza="Double Click,Currency"><option value="USD">USD</option><option value="CAD">CAD</option></select></div><div class="col-lg-3 col-md-3 col-sm-12 mt20"><label class="control-label" style="white-space: nowrap;">Default Floodlight Activity</label><div class=""><input type="text" placeholder="required" style="display:inline;" class="form-control" maxlength="50" required validate-utf-eight ng-model="default_floodlight" name="default_floodlight" validate-blur-forza="Double Click,Default Floodlight"></div></div><div class="col-lg-3 col-md-3 col-sm-12 mt20"><label class="control-label">Send For:</label><div><select class="form-control" id="all_call" name="all_call" ng-model="all_call" data-placeholder="Select" ng-change="upadatealltracking()" required validate-blur-forza="Double Click,All Call"><option selected="selected" disabled="disabled" value="action0">-- Select --</option><option value="true">All Tracking Numbers</option><option value="false">Individual Tracking Numbers</option></select></div></div></div><div class="form-group row" ng-if="all_call=='true'"><div class="col-lg-12 col-md-12 col-sm-12 mt20"><label class="control-label">Send conversion event when duration is at or above (sec)</label> <input type="number" placeholder="required" min="0" class="form-control mb10" ng-model="$parent.min_call_duration" name="min_call_duration" maxlength="3" required validate-utf-eight validate-blur-forza="Double Click,Minimum call duration" style="display:inline;width:65px;margin-left:10px;margin-right:10px;"> <label class="control-label">and</label> <select style="display:inline;width:auto;margin-left:10px;margin-right:10px;" class="form-control" name="indicator_id" id="indicator_id" ng-options="m.metric_display for m in master_metrics_ui" ng-model="$parent.indicator_id" selected="selected"><option value="">-- Optional --</option></select> <label ng-show="indicator_id.map_id !== undefined" class="control-label">is</label> <select style="width:auto;display:inline;margin-left:10px;" name="threshold" class="form-control" ng-model="$parent.threshold_above" ng-show="indicator_id.map_id !== undefined"><option value="true" ng-selected="threshold_above==true">at or above</option><option value="false" ng-selected="threshold_above==false">at or below</option></select> <input ng-required="indicator_id.map_id !== undefined" type="number" min="0" style="display:inline;width:65px;margin-left:10px;margin-right:10px;" ng-model="$parent.metric_threshold" name="metric_threshold" validate-blur-forza="Double Click,Metric Threshold" class="form-control" maxlength="3" ng-maxlength="3" validate-utf-eight ng-show="indicator_id.map_id !== undefined"></div></div><div class="form-group row" ng-if="all_call=='false'"><div class="col-lg-12 col-md-12 mt20"><b>Instructions:</b> Once Floodlight variable are established in both platforms, go to Settings > Campaign. Click Edit > Call Actions to set criteria and configure the integration for individual call flows.</div></div></div><div class="panel-footer text-right"><button class="btn btn-primary" ng-disabled="(doubleclickForm.$invalid && submitted) || formSubmit || !canAddEdit" onclick="ga('send', 'event', { eventCategory: 'Button', eventAction: 'Click', eventLabel:
							'Save Doubleclick'});">Save</button></div></div></form></div><div><div class="container-fluid"><div class="row"><div class="col-md-12"><div class="panel panel-midnightblue"><div class="panel-heading"><h4>Floodlight Variables</h4></div><div class="panel-body" disable-all="disabled" sticky-table-header3><table id="table_double_click" class="table table-condensed table-striped"><thead><tr style="font-weight: bold; margin-top: 55px; margin-left: 15px;"><th ng-repeat="th in doubleClickHeaders">{{th}}</th><th class="text-right" ng-repeat="th in actionHeader">{{th}}</th></tr></thead><tr ng-repeat="map in mapping"><td><span class="ntext" ng-show="!variableSaved" editable-select="map.map_id" e-name="map_id" onbeforesave="validateData($data,'Metric')" e-form="rowform" e-style="width:190px;" e-ng-options="g.map_id as g.metric_display for g in metrics" e-ng-model="floodVariable" e-validate-blur-forza="DoubleClick Mapping, Metric" e-required e-ng-change="setRow(map, $data);showHide();">{{ map.metric_display || '--Select--'}} </span><span ng-show="variableSaved">{{map.metric_display }}</span></td><td><span text="map.map_type" e-name="map_type" onbeforesave="validateData($data,'Map Type')" e-form="rowform" e-required e-ng-model="map_type">{{ map.map_type | capitalize }}</span></td><td><span text="map.metric_display" e-name="metric_display" e-ng-model="metric_display" e-form="rowform" e-required e-maxlength="35" e-validate-blur-forza="DoubleClick, Floodlight Variable">{{map.map_type !== "" ? map.map_type==="metric" ? "Number" : "String" : ""}}</span></td><td class="text-right" style="white-space: nowrap"><form editable-form name="rowform" onbeforesave="saveMap($data, map.dc_map_id)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == map"><button type="submit" ng-disabled="rowform.$waiting" class="btn btn-sm btn-primary">Save</button> <button type="button" ng-disabled="rowform.$waiting" ng-click="cancelAdd(map.dcmapid,rowform,$index)" class="btn btn-sm btn-default">Cancel</button></form><div class="buttons" ng-show="!rowform.$visible"><button class="btn btn-sm btn-danger" ng-click="removeMap($index, map.dc_map_id, doubleclick_id, map.map_id)" ng-disabled="!canAddEdit">Delete</button></div></td></tr></table><div style=""><button class="btn btn-default" onclick="ga('send', 'event', { eventCategory: 'Button', eventAction: 'Click', eventLabel: 'Add floodlight variable'});" ng-click="addMapping()" ng-disabled="disableAdd || !metrics.length || !canAddEdit">Add Variable</button></div></div></div></div></div></div></div></div></div></div>