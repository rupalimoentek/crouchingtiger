<div id="page-heading"><h1>GeoRoute Locations</h1><div class="options"><div class="btn-toolbar"></div></div></div><div class="container-fluid"><div class="container-fluid" ng-controller="OldGeoRouteTableController"><div class="row"><div class="col-md-12"><div class="panel panel-midnightblue"><div class="panel-heading"><h4>Location Lists</h4><div class="options"></div></div><div class="panel-body"><div class="row mb20"><div class="col-xs-12"><label class="control-label">Add a location list then edit them to add locations to each list.</label></div></div><div class="table-responsive" sticky-table-header3><table id="table_geo_route" class="table table-striped table-hover table-condensed"><thead><tr style="font-weight: bold; margin-top: 40px;"><th ng-repeat="th in geoRouteHeaders">{{th}}</th><th class="text-right" ng-repeat="th in actionHeader">{{th}}</th></tr></thead><tr ng-repeat="geolocation in georoutelocations"><td><span editable-text="geolocation.name" e-name="name" e-ng-model="name" e-form="rowform" e-required onbeforesave="validateData($data,'Geolocation')" e-maxlength="35" e-validate-utf-eight e-validate-blur-forza="Locations List, Name" e-ng-change="enableGeoSave()" e-ng-keyup="enableGeoSave()">{{ geolocation.name || '' }}</span></td><td><span number="geolocation.num_loc" e-ng-model="num_loc" e-name="num_loc" e-form="rowform" e-required>{{ geolocation.num_loc || 0 }}</span></td><td><span text="geolocation.created" e-ng-model="created" e-name="created" e-form="rowform">{{ geolocation.created || '' }}</span></td><td><span text="geolocation.modified" e-ng-model="modified" e-name="modified" e-form="rowform">{{ geolocation.modified || '' }}</span></td><td class="text-right" style="white-space: nowrap"><form editable-form name="rowform" onbeforesave="saveGeoList($data, geolocation.id)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == geolocation"><button type="submit" ng-disabled="rowform.$waiting || disGeoError" class="btn btn-sm btn-primary" ng-click="resizeWindow();">Save</button> <button type="button" ng-disabled="rowform.$waiting" ng-click="cancelGeoAdd($index, geolocation.id,rowform); resizeWindow();" class="btn btn-sm btn-default">Cancel</button></form><div class="buttons" ng-show="!rowform.$visible"><button class="btn btn-sm btn-primary" ng-click="rowform.$show(); resizeWindow();" ng-disabled="disEdit">Edit</button> <button class="btn btn-sm btn-primary-alt" ng-click="editGeoLocations($index,geolocation.id); resizeWindow();" ng-disabled="disEdit">Locations</button> <button class="btn btn-sm btn-danger" ng-click="removeGeoList($index, geolocation.id); resizeWindow();" ng-disabled="canModify || disEdit">Delete</button></div></td></tr></table></div><button class="btn btn-default" ng-click="addGeoList(); resizeWindow();" ng-disabled="canModify || dupGeoLocation"><i class="fa fa-plus-circle"></i> Add GeoRoute List</button></div><div class="panel-footer" style="text-align:right;"></div></div></div></div><div class="row" ng-show="isEdit" id="locationeditor"><div class="col-md-12"><div class="panel panel-midnightblue"><div class="panel-heading"><h4 ng-model="headerName">Location Editor for {{headerName}}</h4><div class="options"></div></div><div class="panel-body"><div class="row mb20"><div class="col-xs-8"><label class="control-label">Add individual locations to a location list or enter many locations quickly with the bulk import option. As calls come in, they are automatically routed to the location that meets specified criteria. If the call cannot be auto-routed, a voice prompt will ask caller to enter the Zip/Postal code or select from a list of stores. Claimed Zip/Postal Code is an optional field to be used for 'Zip/Postal Code Claimed' Geo Routing.</label></div><div class="col-xs-4"><div class="input-group"><input placeholder="Search..." class="form-control" ng-model="search" ng-keyup="removeNewLocation(rowform)"><div class="input-group-btn"><button type="button" class="btn btn-primary"><i class="fa fa-search"></i></button></div></div></div></div><div class="row"><div class="col-xs-12 table-responsive" sticky-table-header3><table class="table table-striped table-hover table-condensed table-responsive"><thead><tr style="margin-top: 40px; margin-left: 10px;"><th ng-repeat="th in locationHeaders">{{th}}</th><th class="text-right" ng-repeat="th in actionHeader">{{th}}</th></tr></thead><tbody><tr dir-paginate="location1 in locations | itemsPerPage: 100 | filter:search:strict track by $index" total-items="totalDataRows" current-page="currentPage" pagination-id="pg-locations"><td><span editable-text="location1.location" e-name="location" e-ng-model="location" e-placeholder="Location Required" e-form="rowform" e-required e-maxlength="50" e-validate-utf-eight onbeforesave="validateData($data,'Location')" e-maxlength="35" e-validate-utf-eight e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.location || '' }}</span></td><td><span editable-text="location1.address" e-name="address" e-ng-model="address" e-placeholder="Address Required" e-form="rowform" e-required e-maxlength="50" e-validate-utf-eight onbeforesave="validateData($data,'Address')" e-maxlength="50" e-validate-utf-eight e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.address || '' }}</span></td><td><span editable-text="location1.city" e-name="city" e-form="rowform" e-placeholder="City Required" e-required onbeforesave="validateData($data,'City')" e-maxlength="50" e-ng-pattern="/^[a-zA-Z0-9 ]+$/" e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.city || '' }}</span></td><td><span editable-text="location1.state" e-name="state" e-form="rowform" e-placeholder="State/Province Required" e-required onbeforesave="validateData($data,'State')" e-maxlength="2" e-validate-utf-eight e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.state || '' }}</span></td><td><span editable-text="location1.zip" e-name="zip" e-form="rowform" e-placeholder="Zip/Postal Code Required" e-required e-ng-maxlength="16" e-maxlength="16" onbeforesave="validateData($data,'Zip')" e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.zip || '' }}</span></td><td><span editable-text="location1.phone" e-name="phone" e-form="rowform" onbeforesave="validateData($data,'Phone')" e-maskinput e-data-inputmask="'mask':'(999) 999-9999'" e-max="15" e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.phone || '' | tel }}</span></td><td><span editable-text="location1.claimed" e-name="claimed" e-form="rowform" e-placeholder="Optional" e-maxlength="2000" e-validate-utf-eight e-remove-error-blur e-ng-change="enableSave()" e-ng-keyup="enableSave()">{{ location1.claimed || '' }}</span></td><td class="text-right" style="white-space: nowrap"><form editable-form name="rowform" ng-show="rowform.$visible" onbeforesave="saveLocation($data, location1.id,rowform)" class="form-buttons form-inline" shown="inserted == location1"><button type="submit" ng-disabled="rowform.$waiting || disError" class="btn btn-sm btn-primary">Save</button> <button type="button" ng-disabled="rowform.$waiting" ng-click="cancellocationAdd($index, location1.id,rowform)" class="btn btn-sm btn-default">Cancel</button></form><div class="buttons" ng-show="!rowform.$visible"><button class="btn btn-sm btn-primary" ng-click="rowform.$show()" ng-disabled="canModify || disEditLocation">Edit</button> <button class="btn btn-sm btn-danger" ng-click="removeLocation($index,location1.id)" ng-disabled="canModify">Delete</button></div></td></tr></tbody></table><div class="row"><div class="col-md-6"><a class="btn btn-default pull-left" ng-click="addLocation()" ng-disabled="canModify || dupSubmit"><i class="fa fa-plus-circle"></i> Add location</a></div><div class="col-md-6"><dir-pagination-controls ng-show="locations.length > 0" class="pull-right" pagination-id="pg-locations" on-page-change="pageChanged(newPageNumber)"></dir-pagination-controls></div></div><div></div></div></div></div><div class="panel-footer text-right"><button class="btn btn-primary" ng-click="ok()" ng-disabled="canModify">Done</button> <button class="btn btn-info pull-left" style="margin-right:4px;" ng-disabled="canModify" ng-csv="downloadTemplate()" filename="GeoTemplate.csv" csv-header="getHeader()">Download Template</button> <button class="btn btn-info pull-left" style="margin-right:4px;" ng-disabled="canModify" ng-csv="downloadGeoData()" filename="{{headerName}}.csv" csv-header="getExportHeader()">Export</button> <button class="btn btn-info pull-left" style="margin-right:4px;" ng-file-select="" ng-model="files" accept=".csv" ng-hide="files">Import CSV File</button> <button class="btn btn-success pull-left" style="margin-right:4px;" ng-click="uploadFile(files)" ng-hide="!files" ng-disabled="canModify || fileIsUploading">Upload {{files[0].name}}</button> <button class="btn btn-info pull-left" ng-click="cancelUploading()" style="margin-right:4px;" ng-hide="!files">Cancel</button></div></div></div></div></div></div>