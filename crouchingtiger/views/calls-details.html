<div id="callsdetailsreport" class="table-to-scrape" ng-controller="CallsDetailsController">
    <div ng-hide="download_audio_enabled" class="mt10">
        <h1 style="color: grey; margin-left: 10px;"><strong>Access Denied</strong> </h1>
        <div class="text-center" style="margin-top: 50px;"><h2>It looks like you do not have permission to access this page.</h2></div>
        <div class="text-center"><h4>Please reach out to your administrator to have permissions granted.</h4></div>
    </div>
    <div id="page-heading" ng-show="download_audio_enabled">
        <h1>Call Details</h1>
        <div class="options">
            <div class="btn-toolbar">
                <div class="pull-right" style="margin-left:10px;">
                    <button class="btn btn-lg btn-default ng-isolate-scope" daterangepicker="drp_options" date-begin="drp_start" date-end="drp_end" onapplychange="changeDateRange()" ng-disabled="whichScheduleReport !== undefined">
                        <i class="fa fa-calendar"></i> <span style="margin-left: 5px" class="ng-binding hidden-xs">{{drp_start +' - '+ drp_end}}</span> <b class="caret"></b>
                    </button>
                    <!--<button ng-click="changeReportParams('date')" class="btn btn-primary">Apply</button>-->
                </div>
            </div>
        </div>
        <div class="mt20" style="top:0;left:40%;position:absolute;" ng-show="preview">
            <h2>Preview Only</h2>
        </div>
    </div>
    <div class="container-fluid" ng-show="download_audio_enabled">
        <div class="row mt10" style="padding:0 20px;" ng-hide="whichScheduleReport !== undefined">
            <div class="crawler-exempt well well-sm clearfix">
                <a ng-href="#/set-schedule-builder?isNew=true" ng-hide="roleId >= 3" class="btn btn-sm btn-default">Schedule Report</a>&nbsp;
                <div class="btn-group" uib-dropdown>
                    <button type="button" class="btn btn-sm btn-default btn-last" uib-dropdown-toggle ng-disabled="!items">
                        <span>Export</span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-hide='isSafari' class="csvScope"><a ng-csv='getCSVData()' lazy-load="true" csv-header='csvHeaderNames' filename="csv_calls.csv" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export CSV'});">Excel/CSV</a></li>
                        <li ng-hide='isSafari'><a ng-csv='getCSVData()' lazy-load="true" csv-header='csvHeaderNames' filename="tsv_calls.tsv" field-separator="\t" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export TSV'});">TSV</a></li>
                        <li ng-hide='!isSafari' class="csvScope"><a ng-click='getCSVData("csv")' lazy-load="true" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export CSV'});">Excel/CSV</a></li>
                        <li ng-hide='!isSafari'><a ng-click='getCSVData("tsv")' lazy-load="true" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export TSV'});">TSV</a></li>


                        <!-- <li><a ng-csv='getCSVData()' lazy-load="true" csv-header='csvHeaderNames' filename="xls_calls.xls" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export Excel'});">Excel</a></li>  -->
                        <!--<li><a download='calls-details.xls' href="#" onclick="return ExcellentExport.excel(this, 'calldetailstable', 'Sheet', 'hideInExcel');" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export Excel'});">Excel</a></li>-->
                        <!--<li class="divider"></li>-->
                        <li><a ng-click="exportPDF()" onClick="ga('send', 'event', { eventCategory: 'Call Details', eventAction: 'Export', eventLabel: 'Export PDF'});">PDF</a></li>
                    </ul>
                </div>
                <!-- <div class="divider"></div> -->
                <!-- <md-checkbox md-no-ink aria-label="Include data for all sub-groups" class="sub-group-toggle md-primary" type="checkbox" role="checkbox">Include data for all sub-groups</md-checkbox> -->
            </div>
        </div>
    </div>
    <style>
        .subscript {
            position: relative;
            font-size: 18px;
            top: 0px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .downloadRecDisable {
            pointer-events: none;
        }
        
        .mh622 {
            min-height: 622px;
        }
        
        #calldetailstable tr {
            border-bottom: 1px solid #E9ECF0;
        }
        
        /* #callsData .sticky-clone3 {
            z-index: 2000
        } */
        
        #callsData #columnpicker {
            z-index: 999
        }
    </style>
    <div class="container-fluid mh622" id="callsData" ng-show="download_audio_enabled">
        <!-- Begin charts row -->
        <div class="container-fluid pb0">

        </div>
        <!-- End charts row -->
        <style>
            .dc-chart {
                float: none;
            }
            
            span.handle {
                display: none;
            }
            
            .chartizzle .panel-heading h4 {
                font-size: 11px;
            }
            
            .advancedf {
                background: #efefef;
                border: 1px solid #ccc;
                border-radius: 5px;
                overflow: auto;
                padding: 15px 0 15px 15px;
                -moz-border-radius: 5px;
                -webkit-border-top-left-radius: 5px;
                -webkit-border-top-right-radius: 5px;
                -webkit-border-bottom-left-radius: 5px;
                -webkit-border-bottom-right-radius: 5px;
            }
            
            ._GATq {
                border-left: 1px solid #ccc;
                border-right: 1px solid #ccc;
                clear: both;
                position: relative;
                text-align: center;
                margin: -1px 0;
            }
            
            ._GATq._GAQzb {
                background-color: #efefef;
                color: #575757;
                font-size: 1.2em;
                font-weight: bold;
                margin-left: 80px;
                padding: 5px 0;
                width: 130px;
            }
            
            #listen_workspace tab-heading .badge {
                top: -6px !important;
                left: 7px !important;
            }
            
            .tab-container p {
                min-width: 150px;
            }
            
            .uib-clear {
                display: none;
                visibility: none;
            }
            
            ul#columnpicker {
                padding: 12px;
                width: 310px;
            }
            
            ul#columnpicker li {
                width: 50%;
                float: left;
                margin-bottom: 4px;
            }
            
            .pulse {
                box-shadow: 0 0 0 0 rgba(0, 0, 0, .3);
                animation-name: pulse_animation;
                animation-duration: 2s;
                animation-iteration-count: 5;
            }
            
            .textAR {
                text-align: right;
            }
            
            .pulse:hover {
                -webkit-animation: none;
                -moz-animation: none;
                -o-animation: none;
                animation: none;
            }
            
            .mejs__time {
                font-weight: 100;
                font-size: 18px;
            }
            
            @-webkit-keyframes pulse_animation {
                0% {
                    @include transform(scale(.95));
                }
                50% {
                    @include transform(scale(1));
                    box-shadow: 0 0 0 25px rgba(233, 236, 240, 0);
                }
                100% {
                    @include transform(scale(.95));
                    box-shadow: 0 0 0 0 rgba(233, 236, 240, 0);
                }
            }
            
            @-moz-keyframes pulse_animation {
                0% {
                    @include transform(scale(.95));
                }
                50% {
                    @include transform(scale(1));
                    box-shadow: 0 0 0 25px rgba(233, 236, 240, 0);
                }
                100% {
                    @include transform(scale(.95));
                    box-shadow: 0 0 0 0 rgba(233, 236, 240, 0);
                }
            }
            
            @-o-keyframes pulse_animation {
                0% {
                    @include transform(scale(.95));
                }
                50% {
                    @include transform(scale(1));
                    box-shadow: 0 0 0 25px rgba(233, 236, 240, 0);
                }
                100% {
                    @include transform(scale(.95));
                    box-shadow: 0 0 0 0 rgba(233, 236, 240, 0);
                }
            }
            
            @keyframes pulse_animation {
                0% {
                    @include transform(scale(.95));
                }
                50% {
                    @include transform(scale(1));
                    box-shadow: 0 0 0 25px rgba(233, 236, 240, 0);
                }
                100% {
                    @include transform(scale(.95));
                    box-shadow: 0 0 0 0 rgba(233, 236, 240, 0);
                }
            }
        </style>
        <!-- Begin charts row -->
        <div class="container-fluid pb0" style="padding:0 20px;">
            <div class="row">
                <div class="panel panel-inverse">
                    <div class="panel-body no-border filter-prepend">
                            <page-loader is-loading-api="isLoadingApi"></page-loader>
                        <div class="col-md-3 col-lg-2 mb10 noDataSelector">
                            {{paginateHeader}}
                        </div>
                        <span style="position:absolute;" id="horsemanFlag" ng-if="horsemanFlag == true"></span>
                        <!-- BASIC FILTER -->
                        <div class="col-md-offset-1 col-lg-offset-3 col-md-5 col-lg-4 input-icon right mb20 crawler-exempt" ng-hide="whichScheduleReport !== undefined">
                            <div class="input-group" style="padding-top: 0px">
                                <input ng-disabled="showAdvFilter" type="text" ng-model="simpleSearchFilter" id="simpleChart" class="form-control simple-input" placeholder="{{showAdvFilter ? 'Basic Search Disabled' : 'Basic Search'}}" enter-press="applyFilter();">
                                <!--the ng-change is for if there is no text in the basic search, then just remove the filters-->
                                <span class="input-group-btn">
                                <button ng-disabled="showAdvFilter" type="button" class="btn btn-primary" title="Search" ng-readonly="advFilter" ng-click="applyFilter();"><i class="fa fa-search"></i> </button>
                                <button ng-disabled="showAdvFilter" type="button" class="btn btn-primary" title="Clear" ng-click="simpleSearchFilter = ''; filterReset();"><i class="fa fa-times-circle"></i></button>
                              </span>
                            </div>
                        </div>
                        <!-- COLUMN PICKER -->
                        <div class="pull-right col-lg-1 col-md-1 col-sm-12 col-xs-12 mb20 text-right">
                            <div class="btn-group" uib-dropdown style="width:100%;z-index:2">
                                <button type="button" class="btn btn-block btn-default pulse" ng-click="noPulse()" uib-dropdown-toggle>
                                    <i class="fa fa-columns"></i>
                                </button>
                                <ul class="dropdown-menu" id="columnpicker" role="menu">
                                    <li ng-repeat="vc in callDetailsColumnMapping" ng-show="vc.show">
                                        <input icheck type="checkbox" ng-disabled="vc.disabled"  ng-checked="vc.visible" ng-model="vc.visible" ng-change="callDetailsColumnToggle(vc)">
                                        <label ng-click="vc.visible = !vc.visible;" >{{ vc.label }}</label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- START OF ADV FILTER HTML -->
                        <div class="col-md-2 col-sm-12 col-xs-12 mb10 text-right crawler-exempt" style="z-index:1" ng-hide="whichScheduleReport !== undefined">
                            <button type="button" class="btn btn-default btn-block btn-adv" ng-click="showAdvFilter = true; simpleSearchFilter = ''">Advanced Filter</button>
                        </div>

                        <div ng-if="showAdvFilter" class="col-md-12 col-lg-12 mb20 text-left">
                            <div class="advanced-filter-directive crawler-exempt" ng-repeat="af in advFilterDefinitions">
                                <div class="_GATq _GAQzb" ng-hide="$index == 0">
                                    <select style="width:auto;display:inline;" class="form-control" ng-model="af.rule">
                            			<option value='AND'>AND</option>
                            			<!-- <option value='OR'>OR</option> -->
                            		</select>
                                </div>
                                <div class="advancedf">
                                    <!-- Inclusivity select -->
                                    <select style="width:auto;display:inline;" class="form-control" ng-model="af.selected_inclusivity" ng-options="inc.label for inc in af.inclusivity">
                            		</select>
                                    <!-- Columns select -->
                                    <select style="width:auto;display:inline;" class="form-control" ng-model="af.selected_column" ng-options="col.label for col in af.columns" ng-change="showOperatorSelect($index); updateOperators(preloading, af, $index); af.user_input='';" ng-disabled="!af.selected_inclusivity">
                            			<option value="" ng-selected="false" ng-hide="true">-- Select --</option>
                            		</select>
                                    <!-- Operators select -->
                                    <select style="width:auto;display:inline;" class="form-control" ng-model="af.selected_operator" ng-options="opt.label for opt in af.operators.options" ng-show="af.show_operators">
                            		</select>
                                    <!-- User input (text) -->
                                    <input style="width:150px;display:inline;" type="text" class="form-control" placeholder="required" ng-model="af.user_input" ng-show="af.operators.type == 'text'">
                                    </input>
                                    <!-- User input (int) -->
                                    <input style="width:150px;display:inline;" type="text" class="form-control" placeholder="required" ng-model="af.user_input" ng-show="af.operators.type == 'int'" ng-keypress='validateInput($event)'>
                                    </input>
                                    <!-- User input (calendar) -->
                                    <input style="width:150px;display:inline;" type="text" class="form-control datepicker" uib-datepicker-popup="dd-MMMM-yyyy" ng-model="af.user_input" is-open="af.dateTime.opened" close-text="Close" ng-readonly="true" timezone="America/Chicago" uib-datepicker-options="af.dateTime.dateOptions"
                                        ng-show="af.operators.type == 'calendar'">
                                    </input>
                                    <button type="button" class="btn btn-default" ng-click="af.dateTime.open($event, $index)" ng-show="af.operators.type == 'calendar'">
                            			<i class="fa fa-calendar"></i>
                            		</button>
                                    <!-- User input (select large) -->
                                    <select ui-select2 ng-model="af.user_input" ng-show="af.operators.type == 'select-large'" style="width:22%;padding-bottom:3px;">
                            			<option ng-repeat="opt in af.select_options" ng-value="opt.value">{{ opt.label }}</option>
                            			<option value="" ng-selected="true" ng-hide="true">-- Select --</option>
                            		</select>
                                    <!-- User input (select small) -->
                                    <select ui-select2 ng-model="af.user_input" ng-show="af.operators.type == 'select-small'" style="width:130px;padding-bottom:3px;">
                            			<option ng-repeat="opt in af.select_options" ng-value="opt.value">{{ opt.label }}</option>
                            			<option value="" ng-selected="true" ng-hide="true">-- Select --</option>
                            		</select>


                                    <!-- Delete rule button (only if more than one rule) -->
                                    <a title="Delete" ng-click="removeFilterDefinition($index);" ng-hide="$index == 0 && advFilterDefinitions.length == 1"><i class="fa fa-times-circle"></i></a>
                                </div>
                                <!-- <div class="_GATq _GAQzb" ng-show="$index != advFilterDefinitions.maxQuantity - 1"></div> -->
                            </div>
                            <div class="_GATq _GAQzb crawler-exempt" ng-hide="advFilterMax || !showAdvFilter"></div>
                            <div class="advancedf crawler-exempt" ng-hide="advFilterMax || !showAdvFilter">
                                <button type="button" class="btn btn-gray" style="border:1px dashed #575757;" ng-click="advFilterDefinitions.length < advancedFilterConfig.maxQuantity ? addFilterDefinition(false) : null; resizeWindow();"><i class="fa fa-plus-circle"></i> Add an Advanced Filter</button>
                            </div>
                            <hr ng-hide="!showAdvFilter" class="crawler-exempt">
                            <!-- Footer Buttons -->
                            <div class="clearfix text-right crawler-exempt">
                                <button ng-hide="!previewMode" type="button" class="pull-left btn btn-primary-alt btn-sm" ng-click="previewReport(urlParams)">Preview</button>
                                <button class="btn btn-primary" ng-hide="hideApplyButton || !showAdvFilter" ng-click="applyFilter(); resizeWindow();">Apply</button>
                                <button ng-hide="!showAdvFilter" type="button" class="btn btn-default" ng-click="filterReset(); resizeWindow();">Cancel</button>
                            </div>
                            <div ng-hide="!previewMode" class="clearfix text-left">
                            </div>
                        </div>

                        <div class="" sticky-table-header3 style="z-index: 0">
                            <div id="cdr_table" style="" class="table-responsive col-md-12" persistent-scroll-bar>
                                <!-- ng-class="{'col-md-12' : infoArea, 'col-md-12' : !infoArea}" -->
                                <table class="table table-striped table-hover table-condensed table-responsive" id="calldetailstable">
                                    <thead>
                                        <tr style="margin-top: 40px; margin-left: 10px;">
                                            <th ng-repeat="th in callDetailsColumnMapping" ng-if="th.visible === true" ng-class="{'textAR': th.label === 'Actions'}">{{th.label}}</th>
                                            <!--<th class="text-right" ng-repeat="th in actionHeader">{{th}}</th>-->
                                        </tr>
                                    </thead>
                                    <tbody ng-hide="hideDataTable">
                                        <tr class="datapoint_{{$index}} break-inside" ng-class="{'active' : item.showinfo, 'inactive' : !item.showinfo}" dir-paginate-start="item in items | itemsPerPage: pageSize" total-items="summaryitems[0].total_count_calls" pagination-id="currentPaginationId"
                                            current-page="pagination.current">
                                            <td ng-repeat="column in callDetailsColumnMapping" data-th="{{column.label}}" ng-if="column.visible === true && (item[column.key] || item[column.key[0]] || item[column.key[1]]) && column.key !== 'agent'" class="whiteSpacesWrap" title="{{item[column.key] || item[column.key[0]] + column.key[1] + item[column.key[2]] || '' }}">{{ item[column.key] || item[column.key[0]] + column.key[1] + item[column.key[2]] || '' | truncate_campaignGroupName : column.key }}
                                            </td>
                                            <td ng-repeat="column in callDetailsColumnMapping" data-th="{{column.label}}" ng-if="column.visible === true && (item[column.key] || item[column.key[0]] || item[column.key[1]]) && column.key === 'agent'" class="whiteSpacesWrap">
                                                <select style="min-width:100px" class="form-control" ng-selected="true" ng-model="item[column.key]" ng-change="changedValue(item, item.call_id, item.org_unit_id , item.ct_user_id)"
                                                    ng-disabled="disableAgent(item.score_card_call_status) || roleId === 3 || roleId === 8 || showAgent === false" ng-options="item as item.username for item in item.callAgentList">
                                                    
                                                        <option value="{{item.ct_user_id}}"> {{item.username | orderby: item.username}}</option>
                                                </select>
                                            </td>
                                            <td style="white-space: nowrap" ng-if="callDetailsColumnMapping[callDetailsColumnMapping.length - 1].visible === true">
                                                <div class="buttons pull-right">
                                                    <button class="btn btn-sm btn-primary" data-toggle="collapse" data-collapse-group="audioShow" data-target="#{{ item.call_id }}{{item.call_id }}" class="accordion-toggle" ng-click="item.audioShow = !item.audioShow; playPause(item.call_id);" title="{{ item.listenLabel }}"
                                                        ng-disabled="!audioAccessPermission || {{ item.noRecording }} || item.s3URL === null || item.s3URL === undefined || whichScheduleReport !== undefined || item.disposition === 'Referral'|| ((item.disposition === 'Busy' && item.recording_file =='') &&item.is_voicemail == 'No')"><i class="fa fa-play"></i></button>
                                                    <button class="btn btn-sm btn-info" data-toggle="collapse" data-collapse-group="infoShow" data-target="#{{ item.call_id }}" class="accordion-toggle" ng-click="item.showinfo = !item.showinfo; getinfodetails($index, item.call_id, item.showinfo)" title="Toggle Call Info"><i class="fa fa-info-circle"></i></button>
                                                    <button class="btn btn-sm {{item.blockclass}}" ng-disabled="!isTagAccess || !isClick" ng-click="item.blockme=true; blocknumber($index,item.call_id, item.source, item.encrypted_source);" ng-hide="isReadonly" title="{{item.blocktext}} Number"><i ng-class="item.blockme ? 'fa fa-spinner fa-spin' : 'fa fa-ban'" ></i></button>
                                                    <a href="{{item.s3URL}}" ng-class="{ 'downloadRecDisable' : item.noRecording !== false || !audioAccessPermission || item.disposition === 'Referral' || item.s3URL === null || item.s3URL === undefined ||((item.disposition === 'Busy' && item.recording_file =='') &&item.is_voicemail == 'No')}"><button ng-disabled="item.noRecording || !audioAccessPermission || item.s3URL === null || item.s3URL === undefined || item.disposition === 'Referral' || ((item.disposition === 'Busy' && item.recording_file =='') &&item.is_voicemail == 'No')" class="btn btn-primary-alt btn-sm" title="Download Audio File"><i class="fa fa-cloud-download"> </i></button></a>
                                                    <button class="btn btn-default btn-sm" ng-click="openEmail('md', item.s3URL);" ng-disabled="item.noRecording || item.s3URL === null || item.s3URL === undefined || !audioAccessPermission || item.disposition === 'Referral' ||((item.disposition === 'Busy' && item.recording_file =='') &&item.is_voicemail == 'No')" title="Email Call"><i class="fa fa-envelope-o"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr ng-if="item.audioShow" class="hideInExcel">
                                            <td colspan="17" class="hiddenRow playerTD">
                                                <div class="accordian-body collapse mt10" id="{{item.call_id }}{{item.call_id }}">
                                                    <div class="player-container">
                                                        <div class="media-wrapper">
                                                            <audio ng-id="{{item.call_id}}" preload="metadata" controls style="width:100%;">
                                                        <source dynamic-url ng-id="{{item.s3URL}}" src="" type="audio/mp3">
                                                    </audio>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr ng-if="item.showinfo" class="hideInExcel" dir-paginate-end>
                                            <td colspan="17" class="hiddenRow">
                                                <div class="accordian-body collapse mt10" id="{{ item.call_id }}">
                                                    <uib-tabset tab-theme="info" tab-position="right" class="tab-info tab-right">
                                                        <uib-tab>
                                                            <uib-tab-heading> <span class="">Info</span> </uib-tab-heading>
                                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                                <div class="col-lg-6" ng-show="hasExtendedData">
                                                                    <p><strong>Name and Address</strong><br>
                                                                        <span ng-if="caller_info[$index].source == 'acxiom'">
                                                        {{ caller_info[$index].consumer1.first_name || '' }} {{ caller_info[$index].consumer1.last_name || '' }}<br>
                                                        {{ caller_info[$index].address_info.house_number || '' }} {{ caller_info[$index].address_info.street_pre_directional || '' }} {{ caller_info[$index].address_info.street_name || '' }} {{ caller_info[$index].address_info.street_post_directional || '' }} {{ caller_info[$index].address_info.street_suffix || '' }}<br>
                                                        {{ caller_info[$index].address_info.city || '' }} {{ caller_info[$index].address_info.state || '' }} {{ caller_info[$index].address_info.zip || '' }}
                                                        </span>
                                                                        <span ng-if="caller_info[$index].source == 'white pages'">
                                                            {{ caller_info[$index].belongs_to[0].name || '' }}<br>
                                                            {{ caller_info[$index].current_addresses[0].street_line_1 || '' }}<br ng-if="caller_info[$index].current_addresses[0].street_line_1">
                                                            {{ caller_info[$index].current_addresses[0].city || '' }} {{ caller_info[$index].current_addresses[0].state_code || '' }} {{ caller_info[$index].current_addresses[0].country_code || '' }} {{ caller_info[$index].current_addresses[0].postal_code || '' }}
                                                        </span>
                                                                    </p>
                                                                </div>
                                                                <div class="col-lg-6">
                                                                    <p><strong>Conversation</strong><br> Sales Inquiry: {{ (!ind_scores[$index].hasOwnProperty('Sales Inquiry')) ? 'N/A' : (ind_scores[$index]['Sales Inquiry'] > 50) ? 'True' : 'False' }}<br>                                                                        Conversion: {{ (!ind_scores[$index].hasOwnProperty('All Conversion (c)')) ? 'N/A' : (ind_scores[$index]['All Conversion (c)'] > 50) ? 'True' : 'False'}}<br> Missed Opportunity: {{
                                                                        (!ind_scores[$index].hasOwnProperty('Missed Opportunity (c)')) ? 'N/A' : (ind_scores[$index]['Missed Opportunity (c)'] > 50) ? 'True' : 'False' }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                                <div class="col-lg-6">
                                                                    <p><strong>Session</strong><br> Referring: {{ dnidata[$index].referring || '' }} <br> Referring Type: {{ dnidata[$index].referring_type || '' }} <br> Keyword: {{ (dnidata[$index].ref_param
                                                                        !== null && dnidata[$index].ref_param.kw ? dnidata[$index].ref_param.kw : (dnidata[$index].search_words) || '') }}<br> UTM Campaign: {{ dnidata[$index].ref_param.utm_campaign || ''
                                                                        }}
                                                                        <br>
                                                                    </p>
                                                                </div>
                                                                <div class="col-lg-6">
                                                                    <p><span class="hidden-md hidden-sm hidden-xs"><br></span> First Page: {{ dnidata[$index].first_page || '' }}<br> Last Page: {{ dnidata[$index].last_page || '' }}<br> Geo IP: {{ dnidata[$index].ip_host
                                                                        || '' }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </uib-tab>
                                                        <uib-tab>
                                                            <uib-tab-heading class="dropdown"> <span class="">Comments</span> <span class="badge badge-orange">{{call_commentslength[item.call_id] || ''}}</span></uib-tab-heading>
                                                            <!--Begin Comments Widget container-->
                                                            <div id="comments" class="top2 dashboard bordered">
                                                                <div class="rt-block widget">
                                                                    <div class="rt-module-inner">
                                                                        <div class="module-content widget-padding widget-container">
                                                                            <form name="commentForm" id="commentForm" valid-submit="postcomment($index, item.call_id);" novalidate>
                                                                                <fieldset>
                                                                                    <div class="">
                                                                                        <label class="control-label">Comment:</label>
                                                                                        <input class="btn btn-info btn-sm pull-right update" type="submit" id="addComment{{item.call_id}}" title="Add Comment Button" ng-disabled="!comment.text[item.call_id]" value="Add">
                                                                                        <textarea name="commenttext" title="Add Comment" class=" mt10 form-control" style="resize:vertical;" id="comment.text{{item.call_id}}" ng-model="comment.text[item.call_id]"></textarea>

                                                                                        <!--<input name="commenttext" title="Add Comment Input" id="commenttext" size="30" ng-model="commenttext" class="inputbox ui-autocomplete-input" value="" type="text" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">-->

                                                                                    </div>
                                                                                </fieldset>
                                                                            </form>

                                                                            <div id="comments_container" class="mt10" ng-repeat="call_comment in call_comments[item.call_id]">
                                                                                <div id="commentblock_{{call_comment.comment_id}}" class="rt-block comment_div">
                                                                                    <div>
                                                                                        <a href="" ng-show="userCanDeleteComment(call_comment.ct_user_id)"><img src="/img/icons/icon-delete.png" ng-click="deletecomment($index, call_comment.comment_id,item.call_id);" class="deleteComment" title="Delete comment button:"
                                                                                                width="10px" height="10px"></a>

                                                                                        <strong>
                                                                                {{ call_comment.comment_text || '' }}             </strong>
                                                                                        <br>
                                                                                        <em>{{call_comment.first_name}}&nbsp;{{call_comment.last_name}}</em><br>
                                                                                        <em>{{ call_comment.comment_created_formatted || '' }}</em><br>
                                                                                        <input type="hidden" name="comment_user_id" id="comment_{{call_comment.comment_id}}" value="{{call_comment.comment_id}}">
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!--End Comments Widget container-->
                                                        </uib-tab>
                                                        <uib-tab>
                                                            <uib-tab-heading class="dropdown"> <span class="">Tags</span> <span class="badge badge-orange">{{call_tagslength[item.call_id] || ''}}</span></uib-tab-heading>
                                                            <div id="tags_add" class="top2 dashboard bordered">
                                                                <div class="module-content widget-padding widget-container">
                                                                    <form name="calltagForm" id="calltagForm" valid-submit="postcalltag($index, item.call_id, true);" novalidate>
                                                                        <fieldset>
                                                                            <div class="">
                                                                                <label class="control-label">Select Tags:</label>
                                                                                <input class="btn btn-info btn-sm pull-right update" type="submit" id="addCallTag" ng-disabled="!isTagAccess" title="Save Call Tag Button" value="Save">
                                                                                <select id="calltagselect{{item.call_id}}" class="mb15 mt10" ui-select2="tagoptiontemplate(0)" ng-model="selCallTags[item.call_id]" multiple style="width:100%;" ng-disabled="!isTagAccess">
                                                                        <option value="{{call_tag.tag_id}}" locked="{{call_tag.locked}}"  ng-repeat="call_tag in call_tags[item.call_id]"> {{call_tag.tag_name}}</option>
                                                                        <option ng-disabled="true" ng-selected="true" value="">-- Available Tags--</option>
                                                                        <!--<option value="{{tag.tag_id}}" ng-repeat="tag in tags"> {{tag.tag_name}}</option>-->
                                                                    </select>
                                                                            </div>
                                                                        </fieldset>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </uib-tab>
                                                    </uib-tabset>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                    <div ng-class="{ 'disablePagination' : whichScheduleReport !== undefined }" class="panel-footer text-right">
                        <dir-pagination-controls pagination-id="currentPaginationId" ng-hide="hidePaginationControls" ng-if="summaryitems[0].total_count_calls > 0" on-page-change="pageChanged(newPageNumber)">
                        </dir-pagination-controls>
                        <!-- The panel footer buttons for offsetting should only show if the number of records in the returned dataset exceed 100 -->
                    </div>
                </div>
            </div>
        </div>
        <div id="closeme" style="clear:both; display:none;" class="modal-footer">
            <button class="btn btn-default" ng-click="cancelPreview()">Close</button>
        </div>
    </div>
</div>
